
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Python lab: data analysis and plotting with pandas &#8212; My sample book</title>
    
  <link href="_static/css/theme.css" rel="stylesheet" />
  <link href="_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/sphinx-book-theme.acff12b8f9c144ce68a297486a2fa670.css" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebelab@latest/lib/index.js"></script>
    <script >
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["\\(", "\\)"]], "displayMath": [["\\[", "\\]"]], "processRefs": false, "processEnvironments": false}})</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Content with notebooks" href="notebooks.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">My sample book</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="intro.html">
   Welcome to your Jupyter Book
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="markdown.html">
   Markdown Files
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="notebooks.html">
   Content with notebooks
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   Python lab: data analysis and plotting with pandas
  </a>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/Python_lab.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/executablebooks/jupyter-book"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FPython_lab.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Launch interactive content"><i class="fas fa-rocket"></i></button>
    <div class="dropdown-buttons">
        
        <a class="binder-button" href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/docs/Python_lab.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Launch Binder" data-toggle="tooltip"
                data-placement="left"><img class="binder-button-logo"
                    src="_static/images/logo_binder.svg"
                    alt="Interact on binder">Binder</button></a>
        
        
        
        
    </div>
</div>

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
            <div class="tocsection onthispage pt-5 pb-3">
                <i class="fas fa-list"></i> Contents
            </div>
            <nav id="bd-toc-nav">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#by-paige-martin">
   By Paige Martin
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#this-python-lab-will-familiarize-you-with">
   This python lab will familiarize you with:
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#there-are-5-challenges-scattered-throughout-this-notebook-that-ask-you-to-try-writing-your-own-code-snippets-based-on-the-content-you-go-through-here-don-t-worry-there-are-tips-to-help-you-through-if-you-re-inspired-post-any-of-your-challenges-to-the-python-help-channel-in-slack-i-d-love-to-see-what-you-ve-done-and-it-s-a-great-way-to-learn-from-one-another">
     There are 5 challenges scattered throughout this notebook that ask you to try writing your own code snippets, based on the content you go through here (don’t worry, there are tips to help you through!). If you’re inspired, post any of your challenges to the
     <code class="docutils literal notranslate">
      <span class="pre">
       #python-help
      </span>
     </code>
     channel in Slack! I’d love to see what you’ve done, and it’s a great way to learn from one another!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-this-lab-you-will-load-and-plot-temperature-air-quality-and-rainfall-data-from-canberra-australia-where-paige-lives">
     In this lab, you will load and plot temperature, air quality, and rainfall data from Canberra, Australia (where Paige lives!)
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#a-few-notes-about-python-usage">
       A few notes about python usage:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#first-as-always-we-write-maplotlib-inline-so-that-our-plots-appear-within-this-notebook-then-we-load-the-libraries-we-want-in-this-lab-see-comments-for-what-each-individual-line-does">
       First, as always, we write
       <code class="docutils literal notranslate">
        <span class="pre">
         %maplotlib
        </span>
        <span class="pre">
         inline
        </span>
       </code>
       so that our plots appear within this notebook. Then we load the libraries we want in this lab. See comments for what each individual line does.
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#load-some-temperature-data">
   Load some temperature data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#we-are-loading-in-temperature-data-from-canberra-australia-in-the-previous-cell-we-abbreviated-the-pandas-library-as-pd-so-when-we-write-pd-read-csv-that-means-that-we-want-to-use-the-read-csv-file-from-denoted-by-the-the-pandas-library">
     We are loading in temperature data from Canberra, Australia! In the previous cell, we abbreviated the pandas library as ‘pd’. So when we write
     <code class="docutils literal notranslate">
      <span class="pre">
       pd.read_csv
      </span>
     </code>
     that means that we want to use the ‘read_csv’ file from (denoted by the ‘.’) the pandas library.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-above-cell-loads-in-what-s-called-a-pandas-dataframe-so-we-now-have-temperature-data-stored-as-a-pandas-dataframe-named-t-to-view-the-dataset-that-we-just-loaded-you-can-just-type-the-name-of-the-dataframe-or-t-this-will-print-out-a-lot-of-lines-though-so-we-often-just-us-head-to-print-the-first-5-lines-of-the-dataset-similarly-tail-prints-out-the-last-5-rows">
     The above cell loads in what’s called a pandas dataframe, so we now have temperature data stored as a pandas dataframe named ‘T’. To view the dataset that we just loaded, you can just type the name of the dataframe, or
     <code class="docutils literal notranslate">
      <span class="pre">
       T
      </span>
     </code>
     . This will print out a lot of lines though, so we often just us
     <code class="docutils literal notranslate">
      <span class="pre">
       .head()
      </span>
     </code>
     to print the first 5 lines of the dataset. (Similarly,
     <code class="docutils literal notranslate">
      <span class="pre">
       .tail()
      </span>
     </code>
     prints out the last 5 rows!)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#now-we-can-see-the-structure-of-our-dataframe-notice-the-columns-are-labeled-with-different-variables-while-the-rows-display-different-values-of-these-variables-so-the-columns-are-the-variables-in-the-dataset">
     Now we can see the structure of our dataframe! Notice the columns are labeled with different variables, while the rows display different values of these variables. So, the columns are the variables in the dataset!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#each-column-in-our-dataframe-appears-to-be-formatted-differently-for-instance-product-code-is-a-mix-of-numbers-and-letters-while-year-is-just-a-number-to-view-the-data-formats-of-each-row-use-dtypes">
     Each column in our dataframe appears to be formatted differently. For instance, ‘Product code’ is a mix of numbers and letters, while ‘Year’ is just a number. To view the data formats of each row, use
     <code class="docutils literal notranslate">
      <span class="pre">
       .dtypes
      </span>
     </code>
     :
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#notice-that-there-are-separate-columns-for-year-month-and-day-in-pandas-there-is-a-specific-datetime-format-which-is-really-handy-but-the-relevant-columns-in-t-are-not-being-interpreted-as-a-datetime-format-but-rather-as-integers-int64-let-s-change-that">
     Notice that there are separate columns for Year, Month, and Day. In pandas, there is a specific ‘datetime’ format which is really handy, but the relevant columns in T are not being interpreted as a “datetime” format, but rather as integers (‘int64’). Let’s change that!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-the-cell-below-we-use-the-to-datetime-function-from-pandas-to-convert-the-three-columns-into-a-single-datetime-column-notice-how-we-can-create-a-column-simply-by-calling-t-of-denoted-by-the-square-brackets-and-putting-the-name-of-our-new-column-in-quotes-in-this-case-datetime">
     In the cell below we use the “to_datetime()” function from pandas to convert the three columns into a single “DateTime” column. Notice how we can create a column simply by calling T ‘of’ (denoted by the square brackets
     <code class="docutils literal notranslate">
      <span class="pre">
       [
      </span>
      <span class="pre">
       ]
      </span>
     </code>
     ) and putting the name of our new column in quotes, in this case ‘DateTime’.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#let-s-print-the-first-few-rows-of-the-dataframe-again-notice-that-there-has-been-a-new-column-added-at-the-far-right-one-called-datetime">
     Let’s print the first few rows of the dataframe again. Notice that there has been a new column added at the far right: one called “DateTime”!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#let-s-once-more-look-at-the-format-of-the-columns-to-make-sure-that-our-datetime-column-is-being-interpreted-correctly">
     Let’s once more look at the format of the columns to make sure that our ‘DateTime’ column is being interpreted correctly.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-datetime-column-is-now-listed-as-a-datetime-format-datetime64-ns-the-ns-is-because-the-time-is-stored-in-nanoseconds">
     The ‘DateTime’ column is now listed as a datetime format! (‘datetime64[ns]’ - the ‘ns’ is because the time is stored in nanoseconds)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#take-note-of-the-nan-values-under-maximum-temperature-degree-c-in-t-this-means-not-a-number-i-e-the-value-is-undefined-this-is-very-common-especially-in-observational-data-as-every-data-point-in-time-may-not-have-been-recorded-properly-due-to-instrument-failure-for-instance-pandas-and-python-treat-nans-pretty-intuitively-e-g-they-are-not-included-in-the-plots-below-but-they-can-sometimes-be-a-bit-of-a-pain-when-manipulating-data-as-we-will-see-a-bit-later">
     Take note of the ‘NaN’ values under “Maximum temperature (Degree C)” in T. This means “Not a Number”, i.e. the value is undefined. This is very common especially in observational data, as every data point in time may not have been recorded properly due to instrument failure, for instance. Pandas and python treat NaNs pretty intuitively (e.g. they are not included in the plots below). But, they can sometimes be a bit of a pain when manipulating data, as we will see a bit later
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#plot-the-temperature-data">
   Plot the temperature data
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#now-let-s-see-if-we-can-plot-the-data-we-call-upon-the-pyplot-library-that-we-imported-at-the-start-of-this-notebook-and-use-the-plot-function">
     Now let’s see if we can plot the data! We call upon the pyplot library (that we imported at the start of this notebook) and use the
     <code class="docutils literal notranslate">
      <span class="pre">
       plot()
      </span>
     </code>
     function.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#great-look-how-easy-that-was-to-plot-but-notice-that-the-x-axis-is-clearly-not-formatted-as-a-date-so-let-s-fix-that-we-can-pass-the-x-variable-into-the-plot-function-before-the-temperature-data">
     Great, look how easy that was to plot! But, notice that the x-axis is clearly not formatted as a date, so let’s fix that. We can pass the “x” variable into the plot() function before the temperature data.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#now-we-better-add-some-labels-and-let-s-make-the-figure-a-bit-bigger-as-well">
     Now we better add some labels, and let’s make the figure a bit bigger as well.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#notice-that-the-degree-symbol-for-degree-celsius-was-written-in-latex-form-in-a-jupyter-notebook-markdown-cell-you-can-use-latex-formatting-for-equations-which-is-very-handy-latex-formatting-must-be-written-between-dollar-signs-or-to-center-your-equations-see-below">
     Notice that the degree symbol (for degree Celsius) was written in latex form. In a Jupyter notebook markdown cell, you can use latex formatting for equations, which is very handy! Latex formatting must be written between dollar signs (
     <code class="docutils literal notranslate">
      <span class="pre">
       $
      </span>
     </code>
     or
     <code class="docutils literal notranslate">
      <span class="pre">
       $$
      </span>
     </code>
     to center your equations - see below).
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#writing-out-equations-using-latex">
     Writing out equations using latex
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#as-a-quick-aside-let-s-look-at-an-example-of-latex-for-instance-let-s-write-out-the-formula-for-finding-the-mean-of-the-temperature-dataset-the-formula-is-written-in-the-cell-below-run-the-cell-to-see-how-latex-formatting-looks">
       As a quick aside, let’s look at an example of latex. For instance, let’s write out the formula for finding the mean of the temperature dataset. The formula is written in the cell below - run the cell to see how latex formatting looks!
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#take-the-time-mean-of-the-temperature-data-t">
       Take the time mean of the temperature data T
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#now-let-s-calculate-the-mean-or-average-temperature-just-for-kicks-for-this-we-use-the-numpy-library-s-function-mean">
       Now let’s calculate the mean (or average) temperature just for kicks! For this, we use the numpy library’s function
       <code class="docutils literal notranslate">
        <span class="pre">
         mean()
        </span>
       </code>
       .
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#back-to-plotting">
     Back to plotting!
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#great-let-s-get-back-to-our-plot-let-s-make-a-few-changes-to-the-plot-just-for-fun-let-s">
       Great, let’s get back to our plot. Let’s make a few changes to the plot just for fun. Let’s:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#i-ve-added-comments-describing-the-newly-added-lines-of-code-in-the-cell-below">
       I’ve added comments describing the newly added lines of code in the cell below.
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#challenge-1-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
     !Challenge #1! It’s your turn to do some coding and test your knowledge! ——————————–
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#so-the-plot-above-looks-very-nice-if-we-are-simply-interested-in-looking-at-how-the-temperature-in-canberra-has-fluctuated-over-the-last-12-years-or-so">
       So, the plot above looks very nice if we are simply interested in looking at how the temperature in Canberra has fluctuated over the last 12 years or so.
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#now-let-s-take-a-look-at-the-trend-in-the-data-sometimes-we-may-want-to-detrend-our-data-meaning-that-we-remove-a-linear-fit-to-the-data-this-is-important-if-doing-e-g-fourier-analysis-to-detrend-our-data-we-can-use-the-scipy-signal-function-detrend-first-we-have-to-import-the-signal-library-within-the-scipy-package">
       Now let’s take a look at the trend in the data. Sometimes, we may want to detrend our data, meaning that we remove a linear fit to the data. This is important if doing, e.g., Fourier analysis. To detrend our data we can use the
       <em>
        scipy.signal
       </em>
       function ‘detrend’. First, we have to import the signal library within the scipy package:
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#now-let-s-try-to-detrend-the-temperature-timeseries-you-should-get-an-error-message">
       Now let’s try to detrend the temperature timeseries… (you should get an error message!)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#oh-no-we-got-an-error-message-tip-the-important-bit-is-at-the-end-of-the-printed-message-but-that-s-ok-it-tells-us-what-went-wrong-you-should-get-an-error-that-says-something-like-array-must-not-contain-infs-or-nans-so-it-s-complaining-about-our-nan-values-as-discussed-earlier">
       Oh no!! We got an error message
       <em>
        (tip: the important bit is at the end of the printed message)
       </em>
       . But that’s ok, it tells us what went wrong! You should get an error that says something like:
       <em>
        ‘array must not contain infs or NaNs’
       </em>
       . So it’s complaining about our NaN values, as discussed earlier.
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#we-can-use-the-isna-named-for-is-nan-function-to-test-what-values-in-a-column-are-nan">
       We can use the “isna()” (named for “is NaN?”) function to test what values in a column are NaN.
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#that-printed-out-the-row-number-and-either-true-is-a-nan-or-false-is-a-regular-number-we-can-use-the-isna-function-combined-with-the-detrend-function-to-apply-a-detrending-only-to-the-actual-numbers-avoiding-the-nans-to-do-this-we-will-use-a-logical-not-depicted-as-in-python-that-is-we-want-to-apply-detrend-to-all-of-the-values-that-are-not-nan">
       That printed out the row number and either True (is a NaN) or False (is a regular number). We can use the isna() function combined with the detrend function to apply a detrending only to the actual numbers, avoiding the NaNs. To do this we will use a logical “not”, depicted as “~” in python. That is, we want to apply detrend to all of the values that are not NaN.
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#in-order-to-not-overwrite-the-data-let-s-copy-using-numpy-s-copy-function-the-temperature-column-into-a-new-column-of-the-dataframe-and-then-detrend-this-new-column-let-s-call-the-column-t-detrend">
       In order to not overwrite the data, let’s copy (using numpy’s
       <code class="docutils literal notranslate">
        <span class="pre">
         copy()
        </span>
       </code>
       function) the temperature column into a new column of the dataframe, and then detrend this new column. Let’s call the column ‘T_detrend’.
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#now-we-apply-the-detrend-function-only-to-the-values-that-are-not-nans-pd-isna">
       Now we apply the detrend function only to the values that are not (~) NaNs (pd.isna()).
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#you-may-have-gotten-a-warning-after-running-the-cell-above-but-you-can-just-ignore-that-for-now">
       (You may have gotten a warning after running the cell above, but you can just ignore that for now!)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#ok-let-s-plot-both-the-original-temperature-timeseries-and-the-detrended-timeseries-as-subplots-in-the-same-figure">
       Ok, let’s plot both the original temperature timeseries and the detrended timeseries as subplots in the same figure.
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#creating-subplots-is-really-handy-especially-if-you-have-lots-of-figures-you-d-like-to-show-together-when-publishing-papers-in-research-journals-they-usually-want-you-to-have-one-file-per-figure-so-that-s-a-great-time-to-use-subplots">
       Creating subplots is really handy, especially if you have lots of figures you’d like to show together. When publishing papers in research journals, they usually want you to have one file per figure, so that’s a great time to use subplots!
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-two-plots-look-almost-identical-but-notice-the-different-y-axis-scales">
       The two plots look almost identical, but notice the different y-axis scales!
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#challenge-2-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
     !Challenge #2! It’s your turn to do some coding and test your knowledge! ——————————–
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#while-sometimes-you-may-want-to-remove-a-trend-from-a-timeseries-other-times-you-may-be-interested-in-the-trend-let-s-look-at-just-the-trend-itself-to-see-how-temperature-has-evolved-in-canberra-over-the-past-12-years-we-do-this-by-subtracting-the-detrended-data-from-the-original">
       While sometimes you may want to remove a trend from a timeseries, other times you may be interested in the trend! Let’s look at just the trend itself to see how temperature has evolved in Canberra over the past 12 years. We do this by subtracting the detrended data from the original.
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#the-line-increases-in-time-this-implies-that-the-average-temperature-in-canberra-has-been-increasing-over-the-last-12-years-not-too-surprising-given-the-predicted-climate-change-impacts-on-australia">
       The line increases in time - this implies that the average temperature in Canberra has been increasing over the last 12 years! Not too surprising given the predicted climate change impacts on Australia…
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#challenge-3-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
     !Challenge #3! It’s your turn to do some coding and test your knowledge! ——————————–
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#challenge-4-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
     !Challenge #4! It’s your turn to do some coding and test your knowledge! ——————————–
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#fancy-plotting-example-plotting-two-different-datasets-with-different-units-on-the-same-plot">
   Fancy plotting example: plotting two different datasets (with different units) on the same plot
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-order-to-plot-two-datasets-we-need-to-load-a-second-dataset-let-s-load-a-dataset-of-air-quality-measurements-in-canberra-we-call-the-data-aqi-short-for-air-quality-index">
     In order to plot two datasets, we need to load a second dataset. Let’s load a dataset of air quality measurements in Canberra. We call the data ‘aqi’, short for air quality index.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#there-are-many-columns-of-data-here-and-you-may-need-to-scroll-to-the-right-to-see-all-of-the-columns-depending-on-your-screen-size-the-number-we-will-plot-here-is-called-pm2-5-this-refers-to-the-concentration-of-particulate-matter-pm-in-the-air-that-has-a-diameter-of-less-than-2-5-microns">
     There are many columns of data here, and you may need to scroll to the right to see all of the columns (depending on your screen size). The number we will plot here is called
     <em>
      PM2.5
     </em>
     . This refers to the concentration of particulate matter (PM) in the air that has a diameter of less than 2.5 microns.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#anyway-back-to-this-exercise-it-looks-like-there-is-already-a-single-column-with-datetime-information-but-let-s-double-check-that-it-is-being-correctly-identified-as-datetime-by-pandas">
     Anyway, back to this exercise. It looks like there is already a single column with datetime information, but let’s double check that it is being correctly identified as datetime by pandas.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#nope-the-datetime-column-appears-to-be-an-object-let-s-fix-this-by-telling-pandas-to-interpret-as-a-datetime-format">
     Nope, the ‘DateTime’ column appears to be an object. Let’s fix this by telling pandas to interpret as a datetime format.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#now-let-s-take-another-look-at-the-dataset-this-time-let-s-look-at-the-last-5-rows-using-the-tail-function">
     Now let’s take another look at the dataset. This time let’s look at the last 5 rows using the “tail” function.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#the-dates-here-should-look-strange-they-aren-t-in-order-we-can-force-them-into-ascending-time-order-by-running-a-sort-function">
     The dates here should look strange - they aren’t in order! We can force them into ascending time order by running a sort function:
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#if-you-rerun-the-aqi-tail-cell-now-you-should-see-that-the-dates-appear-to-be-in-order-with-the-most-recent-data-at-the-end">
     If you rerun the ‘aqi.tail()’ cell now, you should see that the dates appear to be in order, with the most recent data at the end.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#so-we-have-our-data-loaded-with-the-two-columns-we-are-interested-in-let-s-plot-the-pm2-5-numbers-on-the-same-plot-as-the-temperature-data-this-is-a-bit-trickier-than-just-adding-two-lines-to-the-same-plot-since-we-need-to-account-for-different-units-celsius-vs-a-concentration-of-particles">
     So, we have our data loaded with the two columns we are interested in. Let’s plot the PM2.5 numbers on the same plot as the temperature data! This is a bit trickier than just adding two lines to the same plot, since we need to account for different units (Celsius vs a concentration of particles).
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#we-have-both-timeseries-on-the-same-plot-hooray-now-you-can-see-that-the-pm2-5-concentrations-were-very-small-for-years-before-2020-clearly-the-air-quality-does-not-show-a-yearly-cycle-like-the-temperature-does-also-very-clear-is-that-the-air-quality-was-nearly-two-orders-of-magnitude-worse-than-usual-at-the-start-of-2020-for-reference-the-australian-health-authorities-consider-a-pm2-5-concentration-greater-than-200-to-be-hazardous-to-health">
     We have both timeseries on the same plot - hooray! Now you can see that the PM2.5 concentrations were very small for years before 2020. Clearly, the air quality does not show a yearly cycle like the temperature does! Also very clear is that the air quality was nearly two orders of magnitude worse than usual at the start of 2020. For reference, the Australian health authorities consider a PM2.5 concentration greater than 200 to be hazardous to health.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#let-s-try-to-make-the-plot-look-a-bit-nicer-by-specifying-different-colors-for-the-different-data-since-we-will-use-the-color-argument-a-couple-of-times-let-s-define-the-colors-as-their-own-variables-let-s-also-add-a-horizontal-line-at-the-200-concentration-level-to-visually-highlight-the-hazardous-concentration-number">
     Let’s try to make the plot look a bit nicer by specifying different colors for the different data. Since we will use the color argument a couple of times, let’s define the colors as their own variables. Let’s also add a horizontal line at the 200 concentration level to visually highlight the hazardous concentration number.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#you-can-see-that-the-left-y-axis-labels-are-now-in-red-the-same-color-as-the-temperature-data-and-what-s-nice-about-having-defined-our-plotting-colors-at-the-top-of-the-cell-is-that-you-can-easily-change-the-colors-of-either-of-the-datasets-play-around-with-different-colors-until-you-find-a-combination-you-like-color-names-listed-here-https-matplotlib-org-3-1-0-gallery-color-named-colors-html-or-you-can-define-your-own-color-using-rgb-html-color-codes-click-on-specifying-colors-at-the-above-website">
     You can see that the left y-axis labels are now in red, the same color as the temperature data! And what’s nice about having defined our plotting colors at the top of the cell is that you can easily change the colors of either of the datasets! Play around with different colors until you find a combination you like! (Color names listed here: https://matplotlib.org/3.1.0/gallery/color/named_colors.html, or you can define your own color using RGB html color codes - click on “Specifying Colors” at the above website!)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#just-for-fun-here-are-another-couple-of-other-nice-functions-for-visualizing-data-you-can-use-the-alpha-argument-to-change-the-transparency-of-plotted-data-you-can-also-fill-in-the-area-beneath-a-curve-with-a-solid-color-i-ve-also-zoomed-in-below-to-emphasize-the-grey-shading-beneath-the-pm2-5-data-curve">
     Just for fun, here are another couple of other nice functions for visualizing data. You can use the “alpha” argument to change the transparency of plotted data. You can also fill in the area beneath a curve with a solid color. I’ve also zoomed in below to emphasize the grey shading beneath the PM2.5 data curve.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#challenge-5-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
     !Challenge #5! It’s your turn to do some coding and test your knowledge! ——————————–
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#optional-section-making-a-bar-chart">
   Optional section: making a bar chart!
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-this-exercise-we-will-load-in-a-new-dataset-of-rainfall-in-canberra-then-we-will-organize-the-rainfall-by-monthly-average-and-make-a-bar-chart-to-display-the-data">
     In this exercise, we will load in a new dataset of rainfall in Canberra. Then we will organize the rainfall by monthly average and make a bar chart to display the data!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#load-the-rainfall-data">
     Load the rainfall data
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#again-we-need-to-convert-some-columns-to-datetime-format">
     Again, we need to convert some columns to ‘DateTime’ format.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#now-let-s-just-plot-the-dataset-as-is-to-see-what-it-looks-like">
     Now let’s just plot the dataset as is to see what it looks like
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#it-s-a-bit-hard-to-interpret-what-s-going-on-here-with-daily-rainfall-amounts-over-40-years">
     It’s a bit hard to interpret what’s going on here, with daily rainfall amounts over 40 years!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#we-can-bin-the-rainfall-into-different-time-intervals-for-instance-if-we-want-to-bin-the-rainfall-into-10-day-intervals-we-can-resample-using-the-string-10d-to-mean-10-days-then-we-use-the-function-sum-to-sum-over-each-day-in-the-10-day-interval-in-the-plot-you-can-see-that-the-data-is-starting-to-look-less-messy-now">
     We can bin the rainfall into different time intervals. For instance, if we want to bin the rainfall into 10-day intervals, we can
     <code class="docutils literal notranslate">
      <span class="pre">
       resample()
      </span>
     </code>
     using the string ‘10D’ to mean 10 days. Then we use the function
     <code class="docutils literal notranslate">
      <span class="pre">
       sum()
      </span>
     </code>
     to sum over each day in the 10-day interval. In the plot, you can see that the data is starting to look less messy now.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#in-many-ways-it-is-more-intuitive-to-plot-daily-rainfall-accumulation-as-a-bar-chart-instead-of-as-a-timeseries-so-let-s-do-that-and-to-make-it-slightly-more-interesting-we-adjust-the-width-of-each-bar-in-the-plot-according-to-the-number-of-days-that-has-been-summed-over-although-it-is-summed-over-10-day-intervals-there-are-some-days-with-no-rain-this-time-let-s-sum-over-monthly-rainfall-accumulation">
     In many ways, it is more intuitive to plot daily rainfall accumulation as a bar chart instead of as a timeseries. So let’s do that! And to make it slightly more interesting, we adjust the width of each bar in the plot according to the number of days that has been summed over. (Although it is summed over 10-day intervals, there are some days with no rain.) This time, let’s sum over monthly rainfall accumulation.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#now-let-s-say-we-want-to-plot-the-average-rainfall-accumulation-for-each-month-across-the-40-year-timeseries-we-will-need-to-sum-over-all-days-in-each-month-and-then-average-each-month-across-all-of-the-years-to-do-that-we-can-use-a-for-loop">
     Now let’s say we want to plot the average rainfall accumulation for each month across the 40-year timeseries. We will need to sum over all days in each month and then average each month across all of the years. To do that, we can use a ‘for loop’.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#now-we-will-go-ahead-and-create-a-new-pandas-dataframe-that-we-will-call-rain-bar-with-this-new-data-and-with-the-list-of-each-of-the-months-for-our-datetime-column">
     Now we will go ahead and create a new pandas dataframe that we will call ‘rain_bar’ with this new data and with the list of each of the months for our ‘DateTime’ column
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#it-looks-good-so-far-so-let-s-go-ahead-and-plot-it">
     It looks good so far, so let’s go ahead and plot it!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#we-just-made-a-bar-plot-let-s-fancy-it-up-a-bit-this-is-the-kind-of-thing-a-lot-of-data-science-programmers-might-do-i-won-t-go-through-each-step-here-but-see-if-you-can-figure-out-what-the-code-is-doing-in-the-following-cell-ask-on-slack-or-search-online-if-you-want-to-learn-more-about-this">
     We just made a bar plot! Let’s fancy it up a bit. This is the kind of thing a lot of data science programmers might do! I won’t go through each step here, but see if you can figure out what the code is doing in the following cell! (Ask on Slack or search online if you want to learn more about this!)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#doing-some-statistics-on-your-data-is-always-a-must-do-so-let-s-add-some-confidence-intervals-to-these-bars">
     Doing some statistics on your data is always a must-do! So let’s add some confidence intervals to these bars.
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#plotting-time">
     Plotting time!
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#that-s-it-you-made-it-to-the-end-so-now-you-ve-had-several-examples-of-manipulating-data-and-plotting-test-your-skills-by-playing-around-with-any-of-the-cells-here-and-by-doing-the-other-python-labs-available">
     That’s it! You made it to the end! So now you’ve had several examples of manipulating data and plotting. Test your skills by playing around with any of the cells here and by doing the other python labs available!
    </a>
   </li>
  </ul>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="section" id="python-lab-data-analysis-and-plotting-with-pandas">
<h1>Python lab: data analysis and plotting with pandas<a class="headerlink" href="#python-lab-data-analysis-and-plotting-with-pandas" title="Permalink to this headline">¶</a></h1>
<div class="section" id="by-paige-martin">
<h2>By Paige Martin<a class="headerlink" href="#by-paige-martin" title="Permalink to this headline">¶</a></h2>
<p>This is meant to be a lab that you can walk yourself through on your own time! Any questions and discussions can be posted to the <code class="docutils literal notranslate"><span class="pre">#python-help</span></code> channel in Slack!</p>
</div>
<div class="section" id="this-python-lab-will-familiarize-you-with">
<h2>This python lab will familiarize you with:<a class="headerlink" href="#this-python-lab-will-familiarize-you-with" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>Some of the basic python and jupyter notebook functionality</p></li>
<li><p>Using the pandas library to analyze text/spreadsheet data</p></li>
<li><p>Loading csv (or other text) files</p></li>
<li><p>Manipulating data</p></li>
<li><p>Using DateTime functionality</p></li>
<li><p>Plotting timeseries with matplotlib.pyplot</p></li>
<li><p>Various plotting features in pyplot</p></li>
<li><p>Typing equations in markdown cells using latex</p></li>
<li><p>Optional advanced section: bar charts with confidence intervals</p></li>
</ul>
<div class="section" id="there-are-5-challenges-scattered-throughout-this-notebook-that-ask-you-to-try-writing-your-own-code-snippets-based-on-the-content-you-go-through-here-don-t-worry-there-are-tips-to-help-you-through-if-you-re-inspired-post-any-of-your-challenges-to-the-python-help-channel-in-slack-i-d-love-to-see-what-you-ve-done-and-it-s-a-great-way-to-learn-from-one-another">
<h3>There are 5 challenges scattered throughout this notebook that ask you to try writing your own code snippets, based on the content you go through here (don’t worry, there are tips to help you through!). If you’re inspired, post any of your challenges to the <code class="docutils literal notranslate"><span class="pre">#python-help</span></code> channel in Slack! I’d love to see what you’ve done, and it’s a great way to learn from one another!<a class="headerlink" href="#there-are-5-challenges-scattered-throughout-this-notebook-that-ask-you-to-try-writing-your-own-code-snippets-based-on-the-content-you-go-through-here-don-t-worry-there-are-tips-to-help-you-through-if-you-re-inspired-post-any-of-your-challenges-to-the-python-help-channel-in-slack-i-d-love-to-see-what-you-ve-done-and-it-s-a-great-way-to-learn-from-one-another" title="Permalink to this headline">¶</a></h3>
<p>To convert this lab into a pdf, go to the File menu and choose ‘Download As…’ –&gt; pdf. If this does not work, try first downloading as –&gt; html and then save as a pdf.</p>
</div>
<div class="section" id="in-this-lab-you-will-load-and-plot-temperature-air-quality-and-rainfall-data-from-canberra-australia-where-paige-lives">
<h3>In this lab, you will load and plot temperature, air quality, and rainfall data from Canberra, Australia (where Paige lives!)<a class="headerlink" href="#in-this-lab-you-will-load-and-plot-temperature-air-quality-and-rainfall-data-from-canberra-australia-where-paige-lives" title="Permalink to this headline">¶</a></h3>
<div class="section" id="a-few-notes-about-python-usage">
<h4>A few notes about python usage:<a class="headerlink" href="#a-few-notes-about-python-usage" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Python indexing of arrays/dataframes is done using square brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code> and starts at 0!</p></li>
<li><p>Strings, or words, are denoted by quotes in python, and can be either single ‘ or double “. They are equivalent!</p></li>
<li><p>When doing a loop in python, make sure you indent each line that is within the loop!</p></li>
</ul>
</div>
<div class="section" id="first-as-always-we-write-maplotlib-inline-so-that-our-plots-appear-within-this-notebook-then-we-load-the-libraries-we-want-in-this-lab-see-comments-for-what-each-individual-line-does">
<h4>First, as always, we write <code class="docutils literal notranslate"><span class="pre">%maplotlib</span> <span class="pre">inline</span></code> so that our plots appear within this notebook. Then we load the libraries we want in this lab. See comments for what each individual line does.<a class="headerlink" href="#first-as-always-we-write-maplotlib-inline-so-that-our-plots-appear-within-this-notebook-then-we-load-the-libraries-we-want-in-this-lab-see-comments-for-what-each-individual-line-does" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="o">%</span><span class="k">matplotlib</span> inline

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> <span class="c1"># loads the pandas library</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># loads the plotting library</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># loads the numerical library</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ModuleNotFoundError</span><span class="g g-Whitespace">                       </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="n">f7ae1d8bc479</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">get_ipython</span><span class="p">()</span><span class="o">.</span><span class="n">run_line_magic</span><span class="p">(</span><span class="s1">&#39;matplotlib&#39;</span><span class="p">,</span> <span class="s1">&#39;inline&#39;</span><span class="p">)</span>
<span class="g g-Whitespace">      </span><span class="mi">2</span> 
<span class="g g-Whitespace">      </span><span class="mi">3</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span> <span class="c1"># loads the pandas library</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span> <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span> <span class="c1"># loads the plotting library</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span> <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span> <span class="c1"># loads the numerical library</span>

<span class="nn">//anaconda3/envs/jupyter-book/lib/python3.9/site-packages/IPython/core/interactiveshell.py</span> in <span class="ni">run_line_magic</span><span class="nt">(self, magic_name, line, _stack_depth)</span>
<span class="g g-Whitespace">   </span><span class="mi">2346</span>                 <span class="n">kwargs</span><span class="p">[</span><span class="s1">&#39;local_ns&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_local_scope</span><span class="p">(</span><span class="n">stack_depth</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2347</span>             <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">builtin_trap</span><span class="p">:</span>
<span class="ne">-&gt; </span><span class="mi">2348</span>                 <span class="n">result</span> <span class="o">=</span> <span class="n">fn</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2349</span>             <span class="k">return</span> <span class="n">result</span>
<span class="g g-Whitespace">   </span><span class="mi">2350</span> 

<span class="nn">//anaconda3/envs/jupyter-book/lib/python3.9/site-packages/decorator.py</span> in <span class="ni">fun</span><span class="nt">(*args, **kw)</span>
<span class="g g-Whitespace">    </span><span class="mi">230</span>             <span class="k">if</span> <span class="ow">not</span> <span class="n">kwsyntax</span><span class="p">:</span>
<span class="g g-Whitespace">    </span><span class="mi">231</span>                 <span class="n">args</span><span class="p">,</span> <span class="n">kw</span> <span class="o">=</span> <span class="n">fix</span><span class="p">(</span><span class="n">args</span><span class="p">,</span> <span class="n">kw</span><span class="p">,</span> <span class="n">sig</span><span class="p">)</span>
<span class="ne">--&gt; </span><span class="mi">232</span>             <span class="k">return</span> <span class="n">caller</span><span class="p">(</span><span class="n">func</span><span class="p">,</span> <span class="o">*</span><span class="p">(</span><span class="n">extras</span> <span class="o">+</span> <span class="n">args</span><span class="p">),</span> <span class="o">**</span><span class="n">kw</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">233</span>     <span class="n">fun</span><span class="o">.</span><span class="vm">__name__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__name__</span>
<span class="g g-Whitespace">    </span><span class="mi">234</span>     <span class="n">fun</span><span class="o">.</span><span class="vm">__doc__</span> <span class="o">=</span> <span class="n">func</span><span class="o">.</span><span class="vm">__doc__</span>

<span class="nn">//anaconda3/envs/jupyter-book/lib/python3.9/site-packages/IPython/core/magic.py</span> in <span class="ni">&lt;lambda&gt;</span><span class="nt">(f, *a, **k)</span>
<span class="g g-Whitespace">    </span><span class="mi">185</span>     <span class="c1"># but it&#39;s overkill for just that one bit of state.</span>
<span class="g g-Whitespace">    </span><span class="mi">186</span>     <span class="k">def</span> <span class="nf">magic_deco</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
<span class="ne">--&gt; </span><span class="mi">187</span>         <span class="n">call</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">f</span><span class="p">,</span> <span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="o">*</span><span class="n">a</span><span class="p">,</span> <span class="o">**</span><span class="n">k</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">188</span> 
<span class="g g-Whitespace">    </span><span class="mi">189</span>         <span class="k">if</span> <span class="n">callable</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>

<span class="nn">//anaconda3/envs/jupyter-book/lib/python3.9/site-packages/IPython/core/magics/pylab.py</span> in <span class="ni">matplotlib</span><span class="nt">(self, line)</span>
<span class="g g-Whitespace">     </span><span class="mi">97</span>             <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Available matplotlib backends: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">backends_list</span><span class="p">)</span>
<span class="g g-Whitespace">     </span><span class="mi">98</span>         <span class="k">else</span><span class="p">:</span>
<span class="ne">---&gt; </span><span class="mi">99</span>             <span class="n">gui</span><span class="p">,</span> <span class="n">backend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">shell</span><span class="o">.</span><span class="n">enable_matplotlib</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">gui</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="k">else</span> <span class="n">args</span><span class="o">.</span><span class="n">gui</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">100</span>             <span class="bp">self</span><span class="o">.</span><span class="n">_show_matplotlib_backend</span><span class="p">(</span><span class="n">args</span><span class="o">.</span><span class="n">gui</span><span class="p">,</span> <span class="n">backend</span><span class="p">)</span>
<span class="g g-Whitespace">    </span><span class="mi">101</span> 

<span class="nn">//anaconda3/envs/jupyter-book/lib/python3.9/site-packages/IPython/core/interactiveshell.py</span> in <span class="ni">enable_matplotlib</span><span class="nt">(self, gui)</span>
<span class="g g-Whitespace">   </span><span class="mi">3515</span>         <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">3516</span><span class="s2">         from IPython.core import pylabtools as pt</span>
<span class="ne">-&gt; </span><span class="mi">3517</span><span class="s2">         from matplotlib_inline.backend_inline import configure_inline_support</span>
<span class="g g-Whitespace">   </span><span class="mi">3518</span><span class="s2">         gui, backend = pt.find_gui_and_backend(gui, self.pylab_gui_select)</span>
<span class="g g-Whitespace">   </span><span class="mi">3519</span><span class="s2"> </span>

<span class="s2">//anaconda3/envs/jupyter-book/lib/python3.9/site-packages/matplotlib_inline/backend_inline.py in &lt;module&gt;</span>
<span class="g g-Whitespace">      </span><span class="mi">4</span><span class="s2"> # Distributed under the terms of the BSD 3-Clause License.</span>
<span class="g g-Whitespace">      </span><span class="mi">5</span><span class="s2"> </span>
<span class="ne">----&gt; </span><span class="mi">6</span><span class="s2"> import matplotlib</span>
<span class="g g-Whitespace">      </span><span class="mi">7</span><span class="s2"> from matplotlib.backends.backend_agg import (  # noqa</span>
<span class="g g-Whitespace">      </span><span class="mi">8</span><span class="s2">     new_figure_manager,</span>

<span class="ne">ModuleNotFoundError</span>: No module named &#39;matplotlib&#39;
</pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="load-some-temperature-data">
<h2>Load some temperature data<a class="headerlink" href="#load-some-temperature-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="we-are-loading-in-temperature-data-from-canberra-australia-in-the-previous-cell-we-abbreviated-the-pandas-library-as-pd-so-when-we-write-pd-read-csv-that-means-that-we-want-to-use-the-read-csv-file-from-denoted-by-the-the-pandas-library">
<h3>We are loading in temperature data from Canberra, Australia! In the previous cell, we abbreviated the pandas library as ‘pd’. So when we write <code class="docutils literal notranslate"><span class="pre">pd.read_csv</span></code> that means that we want to use the ‘read_csv’ file from (denoted by the ‘.’) the pandas library.<a class="headerlink" href="#we-are-loading-in-temperature-data-from-canberra-australia-in-the-previous-cell-we-abbreviated-the-pandas-library-as-pd-so-when-we-write-pd-read-csv-that-means-that-we-want-to-use-the-read-csv-file-from-denoted-by-the-the-pandas-library" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;IDCJAC0010_070351_1800_Data.csv&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>pd.read_csv<span class="o">?</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-above-cell-loads-in-what-s-called-a-pandas-dataframe-so-we-now-have-temperature-data-stored-as-a-pandas-dataframe-named-t-to-view-the-dataset-that-we-just-loaded-you-can-just-type-the-name-of-the-dataframe-or-t-this-will-print-out-a-lot-of-lines-though-so-we-often-just-us-head-to-print-the-first-5-lines-of-the-dataset-similarly-tail-prints-out-the-last-5-rows">
<h3>The above cell loads in what’s called a pandas dataframe, so we now have temperature data stored as a pandas dataframe named ‘T’. To view the dataset that we just loaded, you can just type the name of the dataframe, or <code class="docutils literal notranslate"><span class="pre">T</span></code>. This will print out a lot of lines though, so we often just us <code class="docutils literal notranslate"><span class="pre">.head()</span></code> to print the first 5 lines of the dataset. (Similarly, <code class="docutils literal notranslate"><span class="pre">.tail()</span></code> prints out the last 5 rows!)<a class="headerlink" href="#the-above-cell-loads-in-what-s-called-a-pandas-dataframe-so-we-now-have-temperature-data-stored-as-a-pandas-dataframe-named-t-to-view-the-dataset-that-we-just-loaded-you-can-just-type-the-name-of-the-dataframe-or-t-this-will-print-out-a-lot-of-lines-though-so-we-often-just-us-head-to-print-the-first-5-lines-of-the-dataset-similarly-tail-prints-out-the-last-5-rows" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Product code</th>
      <th>Bureau of Meteorology station number</th>
      <th>Year</th>
      <th>Month</th>
      <th>Day</th>
      <th>Maximum temperature (Degree C)</th>
      <th>Days of accumulation of maximum temperature</th>
      <th>Quality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>4399</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2020</td>
      <td>1</td>
      <td>17</td>
      <td>24.8</td>
      <td>1.0</td>
      <td>N</td>
    </tr>
    <tr>
      <th>4400</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2020</td>
      <td>1</td>
      <td>18</td>
      <td>25.3</td>
      <td>1.0</td>
      <td>N</td>
    </tr>
    <tr>
      <th>4401</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2020</td>
      <td>1</td>
      <td>19</td>
      <td>31.3</td>
      <td>1.0</td>
      <td>N</td>
    </tr>
    <tr>
      <th>4402</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2020</td>
      <td>1</td>
      <td>20</td>
      <td>27.9</td>
      <td>1.0</td>
      <td>N</td>
    </tr>
    <tr>
      <th>4403</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2020</td>
      <td>1</td>
      <td>21</td>
      <td>27.6</td>
      <td>1.0</td>
      <td>N</td>
    </tr>
  </tbody>
</table>
<p>4404 rows × 8 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">head</span><span class="p">()</span> <span class="c1"># print first 5 rows of our dataframe T</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Product code</th>
      <th>Bureau of Meteorology station number</th>
      <th>Year</th>
      <th>Month</th>
      <th>Day</th>
      <th>Maximum temperature (Degree C)</th>
      <th>Days of accumulation of maximum temperature</th>
      <th>Quality</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="now-we-can-see-the-structure-of-our-dataframe-notice-the-columns-are-labeled-with-different-variables-while-the-rows-display-different-values-of-these-variables-so-the-columns-are-the-variables-in-the-dataset">
<h3>Now we can see the structure of our dataframe! Notice the columns are labeled with different variables, while the rows display different values of these variables. So, the columns are the variables in the dataset!<a class="headerlink" href="#now-we-can-see-the-structure-of-our-dataframe-notice-the-columns-are-labeled-with-different-variables-while-the-rows-display-different-values-of-these-variables-so-the-columns-are-the-variables-in-the-dataset" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="each-column-in-our-dataframe-appears-to-be-formatted-differently-for-instance-product-code-is-a-mix-of-numbers-and-letters-while-year-is-just-a-number-to-view-the-data-formats-of-each-row-use-dtypes">
<h3>Each column in our dataframe appears to be formatted differently. For instance, ‘Product code’ is a mix of numbers and letters, while ‘Year’ is just a number. To view the data formats of each row, use  <code class="docutils literal notranslate"><span class="pre">.dtypes</span></code>:<a class="headerlink" href="#each-column-in-our-dataframe-appears-to-be-formatted-differently-for-instance-product-code-is-a-mix-of-numbers-and-letters-while-year-is-just-a-number-to-view-the-data-formats-of-each-row-use-dtypes" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Product code                                    object
Bureau of Meteorology station number             int64
Year                                             int64
Month                                            int64
Day                                              int64
Maximum temperature (Degree C)                 float64
Days of accumulation of maximum temperature    float64
Quality                                         object
dtype: object
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="notice-that-there-are-separate-columns-for-year-month-and-day-in-pandas-there-is-a-specific-datetime-format-which-is-really-handy-but-the-relevant-columns-in-t-are-not-being-interpreted-as-a-datetime-format-but-rather-as-integers-int64-let-s-change-that">
<h3>Notice that there are separate columns for Year, Month, and Day. In pandas, there is a specific ‘datetime’ format which is really handy, but the relevant columns in T are not being interpreted as a “datetime” format, but rather as integers (‘int64’). Let’s change that!<a class="headerlink" href="#notice-that-there-are-separate-columns-for-year-month-and-day-in-pandas-there-is-a-specific-datetime-format-which-is-really-handy-but-the-relevant-columns-in-t-are-not-being-interpreted-as-a-datetime-format-but-rather-as-integers-int64-let-s-change-that" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="in-the-cell-below-we-use-the-to-datetime-function-from-pandas-to-convert-the-three-columns-into-a-single-datetime-column-notice-how-we-can-create-a-column-simply-by-calling-t-of-denoted-by-the-square-brackets-and-putting-the-name-of-our-new-column-in-quotes-in-this-case-datetime">
<h3>In the cell below we use the “to_datetime()” function from pandas to convert the three columns into a single “DateTime” column. Notice how we can create a column simply by calling T ‘of’ (denoted by the square brackets <code class="docutils literal notranslate"><span class="pre">[</span> <span class="pre">]</span></code>) and putting the name of our new column in quotes, in this case ‘DateTime’.<a class="headerlink" href="#in-the-cell-below-we-use-the-to-datetime-function-from-pandas-to-convert-the-three-columns-into-a-single-datetime-column-notice-how-we-can-create-a-column-simply-by-calling-t-of-denoted-by-the-square-brackets-and-putting-the-name-of-our-new-column-in-quotes-in-this-case-datetime" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">T</span><span class="p">[[</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span><span class="s1">&#39;Day&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="let-s-print-the-first-few-rows-of-the-dataframe-again-notice-that-there-has-been-a-new-column-added-at-the-far-right-one-called-datetime">
<h3>Let’s print the first few rows of the dataframe again. Notice that there has been a new column added at the far right: one called “DateTime”!<a class="headerlink" href="#let-s-print-the-first-few-rows-of-the-dataframe-again-notice-that-there-has-been-a-new-column-added-at-the-far-right-one-called-datetime" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Product code</th>
      <th>Bureau of Meteorology station number</th>
      <th>Year</th>
      <th>Month</th>
      <th>Day</th>
      <th>Maximum temperature (Degree C)</th>
      <th>Days of accumulation of maximum temperature</th>
      <th>Quality</th>
      <th>DateTime</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-01</td>
    </tr>
    <tr>
      <th>1</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-02</td>
    </tr>
    <tr>
      <th>2</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-03</td>
    </tr>
    <tr>
      <th>3</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-04</td>
    </tr>
    <tr>
      <th>4</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-05</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="let-s-once-more-look-at-the-format-of-the-columns-to-make-sure-that-our-datetime-column-is-being-interpreted-correctly">
<h3>Let’s once more look at the format of the columns to make sure that our ‘DateTime’ column is being interpreted correctly.<a class="headerlink" href="#let-s-once-more-look-at-the-format-of-the-columns-to-make-sure-that-our-datetime-column-is-being-interpreted-correctly" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Product code                                           object
Bureau of Meteorology station number                    int64
Year                                                    int64
Month                                                   int64
Day                                                     int64
Maximum temperature (Degree C)                        float64
Days of accumulation of maximum temperature           float64
Quality                                                object
DateTime                                       datetime64[ns]
dtype: object
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="the-datetime-column-is-now-listed-as-a-datetime-format-datetime64-ns-the-ns-is-because-the-time-is-stored-in-nanoseconds">
<h3>The ‘DateTime’ column is now listed as a datetime format! (‘datetime64[ns]’ - the ‘ns’ is because the time is stored in nanoseconds)<a class="headerlink" href="#the-datetime-column-is-now-listed-as-a-datetime-format-datetime64-ns-the-ns-is-because-the-time-is-stored-in-nanoseconds" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="take-note-of-the-nan-values-under-maximum-temperature-degree-c-in-t-this-means-not-a-number-i-e-the-value-is-undefined-this-is-very-common-especially-in-observational-data-as-every-data-point-in-time-may-not-have-been-recorded-properly-due-to-instrument-failure-for-instance-pandas-and-python-treat-nans-pretty-intuitively-e-g-they-are-not-included-in-the-plots-below-but-they-can-sometimes-be-a-bit-of-a-pain-when-manipulating-data-as-we-will-see-a-bit-later">
<h3>Take note of the ‘NaN’ values under “Maximum temperature (Degree C)” in T. This means “Not a Number”, i.e. the value is undefined. This is very common especially in observational data, as every data point in time may not have been recorded properly due to instrument failure, for instance. Pandas and python treat NaNs pretty intuitively (e.g. they are not included in the plots below). But, they can sometimes be a bit of a pain when manipulating data, as we will see a bit later<a class="headerlink" href="#take-note-of-the-nan-values-under-maximum-temperature-degree-c-in-t-this-means-not-a-number-i-e-the-value-is-undefined-this-is-very-common-especially-in-observational-data-as-every-data-point-in-time-may-not-have-been-recorded-properly-due-to-instrument-failure-for-instance-pandas-and-python-treat-nans-pretty-intuitively-e-g-they-are-not-included-in-the-plots-below-but-they-can-sometimes-be-a-bit-of-a-pain-when-manipulating-data-as-we-will-see-a-bit-later" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="plot-the-temperature-data">
<h2>Plot the temperature data<a class="headerlink" href="#plot-the-temperature-data" title="Permalink to this headline">¶</a></h2>
<div class="section" id="now-let-s-see-if-we-can-plot-the-data-we-call-upon-the-pyplot-library-that-we-imported-at-the-start-of-this-notebook-and-use-the-plot-function">
<h3>Now let’s see if we can plot the data! We call upon the pyplot library (that we imported at the start of this notebook) and use the <code class="docutils literal notranslate"><span class="pre">plot()</span></code> function.<a class="headerlink" href="#now-let-s-see-if-we-can-plot-the-data-we-call-upon-the-pyplot-library-that-we-imported-at-the-start-of-this-notebook-and-use-the-plot-function" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x1194daeb8&gt;]
</pre></div>
</div>
<img alt="_images/Python_lab_21_1.png" src="_images/Python_lab_21_1.png" />
</div>
</div>
</div>
<div class="section" id="great-look-how-easy-that-was-to-plot-but-notice-that-the-x-axis-is-clearly-not-formatted-as-a-date-so-let-s-fix-that-we-can-pass-the-x-variable-into-the-plot-function-before-the-temperature-data">
<h3>Great, look how easy that was to plot! But, notice that the x-axis is clearly not formatted as a date, so let’s fix that. We can pass the “x” variable into the plot() function before the temperature data.<a class="headerlink" href="#great-look-how-easy-that-was-to-plot-but-notice-that-the-x-axis-is-clearly-not-formatted-as-a-date-so-let-s-fix-that-we-can-pass-the-x-variable-into-the-plot-function-before-the-temperature-data" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>[&lt;matplotlib.lines.Line2D at 0x1194afe48&gt;]
</pre></div>
</div>
<img alt="_images/Python_lab_23_1.png" src="_images/Python_lab_23_1.png" />
</div>
</div>
</div>
<div class="section" id="now-we-better-add-some-labels-and-let-s-make-the-figure-a-bit-bigger-as-well">
<h3>Now we better add some labels, and let’s make the figure a bit bigger as well.<a class="headerlink" href="#now-we-better-add-some-labels-and-let-s-make-the-figure-a-bit-bigger-as-well" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Set the figure size to be 12 inches wide and 4 inches tall</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>

<span class="c1"># Add plot labels</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Temperature in Canberra, Australia ($</span><span class="si">{}</span><span class="s1">^{\circ}$C)&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span> <span class="c1"># add title</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># add xaxis label</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">{}</span><span class="s1">^{\circ}$C&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span> <span class="c1"># add yaxis label</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Text(0, 0.5, &#39;${}^{\\circ}$C&#39;)
</pre></div>
</div>
<img alt="_images/Python_lab_25_1.png" src="_images/Python_lab_25_1.png" />
</div>
</div>
</div>
<div class="section" id="notice-that-the-degree-symbol-for-degree-celsius-was-written-in-latex-form-in-a-jupyter-notebook-markdown-cell-you-can-use-latex-formatting-for-equations-which-is-very-handy-latex-formatting-must-be-written-between-dollar-signs-or-to-center-your-equations-see-below">
<h3>Notice that the degree symbol (for degree Celsius) was written in latex form. In a Jupyter notebook markdown cell, you can use latex formatting for equations, which is very handy! Latex formatting must be written between dollar signs (<code class="docutils literal notranslate"><span class="pre">$</span></code> or <code class="docutils literal notranslate"><span class="pre">$$</span></code> to center your equations - see below).<a class="headerlink" href="#notice-that-the-degree-symbol-for-degree-celsius-was-written-in-latex-form-in-a-jupyter-notebook-markdown-cell-you-can-use-latex-formatting-for-equations-which-is-very-handy-latex-formatting-must-be-written-between-dollar-signs-or-to-center-your-equations-see-below" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="writing-out-equations-using-latex">
<h3>Writing out equations using latex<a class="headerlink" href="#writing-out-equations-using-latex" title="Permalink to this headline">¶</a></h3>
<div class="section" id="as-a-quick-aside-let-s-look-at-an-example-of-latex-for-instance-let-s-write-out-the-formula-for-finding-the-mean-of-the-temperature-dataset-the-formula-is-written-in-the-cell-below-run-the-cell-to-see-how-latex-formatting-looks">
<h4>As a quick aside, let’s look at an example of latex. For instance, let’s write out the formula for finding the mean of the temperature dataset. The formula is written in the cell below - run the cell to see how latex formatting looks!<a class="headerlink" href="#as-a-quick-aside-let-s-look-at-an-example-of-latex-for-instance-let-s-write-out-the-formula-for-finding-the-mean-of-the-temperature-dataset-the-formula-is-written-in-the-cell-below-run-the-cell-to-see-how-latex-formatting-looks" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="take-the-time-mean-of-the-temperature-data-t">
<h4>Take the time mean of the temperature data T<a class="headerlink" href="#take-the-time-mean-of-the-temperature-data-t" title="Permalink to this headline">¶</a></h4>
<div class="math notranslate nohighlight">
\[\text{mean} = \frac{\Sigma_i T[i]}{n},\]</div>
<p>where <span class="math notranslate nohighlight">\(n =\)</span> length of dataset.</p>
<p>What this states is that the mean is defined as the sum (<span class="math notranslate nohighlight">\(\Sigma\)</span>) over each point in time (<span class="math notranslate nohighlight">\(i\)</span>) of the temperature value at time i (<span class="math notranslate nohighlight">\(T_i\)</span>) divided by the length of the timeseries.</p>
</div>
<div class="section" id="now-let-s-calculate-the-mean-or-average-temperature-just-for-kicks-for-this-we-use-the-numpy-library-s-function-mean">
<h4>Now let’s calculate the mean (or average) temperature just for kicks! For this, we use the numpy library’s function <code class="docutils literal notranslate"><span class="pre">mean()</span></code>.<a class="headerlink" href="#now-let-s-calculate-the-mean-or-average-temperature-just-for-kicks-for-this-we-use-the-numpy-library-s-function-mean" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>21.36161469664002
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="back-to-plotting">
<h3>Back to plotting!<a class="headerlink" href="#back-to-plotting" title="Permalink to this headline">¶</a></h3>
<div class="section" id="great-let-s-get-back-to-our-plot-let-s-make-a-few-changes-to-the-plot-just-for-fun-let-s">
<h4>Great, let’s get back to our plot. Let’s make a few changes to the plot just for fun. Let’s:<a class="headerlink" href="#great-let-s-get-back-to-our-plot-let-s-make-a-few-changes-to-the-plot-just-for-fun-let-s" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Trim off the extra x-values that have no data at left and right ends of the plot</p></li>
<li><p>Change the color of the plotted timeseries (a list of named colors for pyplot can be found here: <a class="reference external" href="https://matplotlib.org/3.1.0/gallery/color/named_colors.html">https://matplotlib.org/3.1.0/gallery/color/named_colors.html</a></p></li>
</ul>
</div>
<div class="section" id="i-ve-added-comments-describing-the-newly-added-lines-of-code-in-the-cell-below">
<h4>I’ve added comments describing the newly added lines of code in the cell below.<a class="headerlink" href="#i-ve-added-comments-describing-the-newly-added-lines-of-code-in-the-cell-below" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># Add the argument &#39;color&#39; to the plotting function</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;darkorange&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Temperature in Canberra, Australia ($</span><span class="si">{}</span><span class="s1">^{\circ}$C)&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">{}</span><span class="s1">^{\circ}$C&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

<span class="c1"># Align the axes with the first and last values in the timeseries, eliminiating extra white space</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Python_lab_33_0.png" src="_images/Python_lab_33_0.png" />
</div>
</div>
</div>
</div>
<div class="section" id="challenge-1-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
<h3>!Challenge #1! It’s your turn to do some coding and test your knowledge! ——————————–<a class="headerlink" href="#challenge-1-it-s-your-turn-to-do-some-coding-and-test-your-knowledge" title="Permalink to this headline">¶</a></h3>
<p>Copy and paste the above cell (tip: use the buttons near the top of the window - hover over them to see what they do!) below this one. Switch the color of the data (go to the above website or just try typing a color you know, like ‘red’!).</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>

<span class="c1"># Add the argument &#39;color&#39; to the plotting function</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;lavender&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Temperature in Canberra, Australia ($</span><span class="si">{}</span><span class="s1">^{\circ}$C)&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;$</span><span class="si">{}</span><span class="s1">^{\circ}$C&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>

<span class="c1"># Align the axes with the first and last values in the timeseries, eliminiating extra white space</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Python_lab_35_0.png" src="_images/Python_lab_35_0.png" />
</div>
</div>
<div class="section" id="so-the-plot-above-looks-very-nice-if-we-are-simply-interested-in-looking-at-how-the-temperature-in-canberra-has-fluctuated-over-the-last-12-years-or-so">
<h4>So, the plot above looks very nice if we are simply interested in looking at how the temperature in Canberra has fluctuated over the last 12 years or so.<a class="headerlink" href="#so-the-plot-above-looks-very-nice-if-we-are-simply-interested-in-looking-at-how-the-temperature-in-canberra-has-fluctuated-over-the-last-12-years-or-so" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="now-let-s-take-a-look-at-the-trend-in-the-data-sometimes-we-may-want-to-detrend-our-data-meaning-that-we-remove-a-linear-fit-to-the-data-this-is-important-if-doing-e-g-fourier-analysis-to-detrend-our-data-we-can-use-the-scipy-signal-function-detrend-first-we-have-to-import-the-signal-library-within-the-scipy-package">
<h4>Now let’s take a look at the trend in the data. Sometimes, we may want to detrend our data, meaning that we remove a linear fit to the data. This is important if doing, e.g., Fourier analysis. To detrend our data we can use the <em>scipy.signal</em> function ‘detrend’. First, we have to import the signal library within the scipy package:<a class="headerlink" href="#now-let-s-take-a-look-at-the-trend-in-the-data-sometimes-we-may-want-to-detrend-our-data-meaning-that-we-remove-a-linear-fit-to-the-data-this-is-important-if-doing-e-g-fourier-analysis-to-detrend-our-data-we-can-use-the-scipy-signal-function-detrend-first-we-have-to-import-the-signal-library-within-the-scipy-package" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">signal</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="now-let-s-try-to-detrend-the-temperature-timeseries-you-should-get-an-error-message">
<h4>Now let’s try to detrend the temperature timeseries… (you should get an error message!)<a class="headerlink" href="#now-let-s-try-to-detrend-the-temperature-timeseries-you-should-get-an-error-message" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T_detrended</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">detrend</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="gt">---------------------------------------------------------------------------</span>
<span class="ne">ValueError</span><span class="g g-Whitespace">                                </span>Traceback (most recent call last)
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">20</span><span class="o">-</span><span class="mf">0e60</span><span class="n">bf3d2876</span><span class="o">&gt;</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="ne">----&gt; </span><span class="mi">1</span> <span class="n">T_detrended</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">detrend</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>

<span class="nn">//anaconda3/lib/python3.7/site-packages/scipy/signal/signaltools.py</span> in <span class="ni">detrend</span><span class="nt">(data, axis, type, bp, overwrite_data)</span>
<span class="g g-Whitespace">   </span><span class="mi">2580</span>             <span class="n">A</span><span class="p">[:,</span> <span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">cast</span><span class="p">[</span><span class="n">dtype</span><span class="p">](</span><span class="n">arange</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Npts</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="mf">1.0</span> <span class="o">/</span> <span class="n">Npts</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2581</span>             <span class="n">sl</span> <span class="o">=</span> <span class="nb">slice</span><span class="p">(</span><span class="n">bp</span><span class="p">[</span><span class="n">m</span><span class="p">],</span> <span class="n">bp</span><span class="p">[</span><span class="n">m</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
<span class="ne">-&gt; </span><span class="mi">2582</span>             <span class="n">coef</span><span class="p">,</span> <span class="n">resids</span><span class="p">,</span> <span class="n">rank</span><span class="p">,</span> <span class="n">s</span> <span class="o">=</span> <span class="n">linalg</span><span class="o">.</span><span class="n">lstsq</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">newdata</span><span class="p">[</span><span class="n">sl</span><span class="p">])</span>
<span class="g g-Whitespace">   </span><span class="mi">2583</span>             <span class="n">newdata</span><span class="p">[</span><span class="n">sl</span><span class="p">]</span> <span class="o">=</span> <span class="n">newdata</span><span class="p">[</span><span class="n">sl</span><span class="p">]</span> <span class="o">-</span> <span class="n">dot</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="n">coef</span><span class="p">)</span>
<span class="g g-Whitespace">   </span><span class="mi">2584</span>         <span class="c1"># Put data back in original shape.</span>

<span class="nn">//anaconda3/lib/python3.7/site-packages/scipy/linalg/basic.py</span> in <span class="ni">lstsq</span><span class="nt">(a, b, cond, overwrite_a, overwrite_b, check_finite, lapack_driver)</span>
<span class="g g-Whitespace">   </span><span class="mi">1151</span>     <span class="s2">&quot;&quot;&quot;</span>
<span class="g g-Whitespace">   </span><span class="mi">1152</span><span class="s2">     a1 = _asarray_validated(a, check_finite=check_finite)</span>
<span class="ne">-&gt; </span><span class="mi">1153</span><span class="s2">     b1 = _asarray_validated(b, check_finite=check_finite)</span>
<span class="g g-Whitespace">   </span><span class="mi">1154</span><span class="s2">     if len(a1.shape) != 2:</span>
<span class="g g-Whitespace">   </span><span class="mi">1155</span><span class="s2">         raise ValueError(&#39;Input array a should be 2-D&#39;)</span>

<span class="nn">//anaconda3/lib/python3.7/site-packages/scipy/_lib/_util.py</span> in <span class="ni">_asarray_validated</span><span class="nt">(a, check_finite, sparse_ok, objects_ok, mask_ok, as_inexact)</span>
<span class="g g-Whitespace">    </span><span class="mi">237</span><span class="s2">             raise ValueError(&#39;masked arrays are not supported&#39;)</span>
<span class="g g-Whitespace">    </span><span class="mi">238</span><span class="s2">     toarray = np.asarray_chkfinite if check_finite else np.asarray</span>
<span class="ne">--&gt; </span><span class="mi">239</span><span class="s2">     a = toarray(a)</span>
<span class="g g-Whitespace">    </span><span class="mi">240</span><span class="s2">     if not objects_ok:</span>
<span class="g g-Whitespace">    </span><span class="mi">241</span><span class="s2">         if a.dtype is np.dtype(&#39;O&#39;):</span>

<span class="nn">//anaconda3/lib/python3.7/site-packages/numpy/lib/function_base.py</span> in <span class="ni">asarray_chkfinite</span><span class="nt">(a, dtype, order)</span>
<span class="g g-Whitespace">    </span><span class="mi">496</span><span class="s2">     if a.dtype.char in typecodes[&#39;AllFloat&#39;] and not np.isfinite(a).all():</span>
<span class="g g-Whitespace">    </span><span class="mi">497</span><span class="s2">         raise ValueError(</span>
<span class="ne">--&gt; </span><span class="mi">498</span><span class="s2">             &quot;array must not contain infs or NaNs&quot;)</span>
<span class="g g-Whitespace">    </span><span class="mi">499</span><span class="s2">     return a</span>
<span class="g g-Whitespace">    </span><span class="mi">500</span><span class="s2"> </span>

<span class="ne">ValueError</span>: array must not contain infs or NaNs
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="oh-no-we-got-an-error-message-tip-the-important-bit-is-at-the-end-of-the-printed-message-but-that-s-ok-it-tells-us-what-went-wrong-you-should-get-an-error-that-says-something-like-array-must-not-contain-infs-or-nans-so-it-s-complaining-about-our-nan-values-as-discussed-earlier">
<h4>Oh no!! We got an error message <em>(tip: the important bit is at the end of the printed message)</em>. But that’s ok, it tells us what went wrong! You should get an error that says something like: <em>‘array must not contain infs or NaNs’</em>. So it’s complaining about our NaN values, as discussed earlier.<a class="headerlink" href="#oh-no-we-got-an-error-message-tip-the-important-bit-is-at-the-end-of-the-printed-message-but-that-s-ok-it-tells-us-what-went-wrong-you-should-get-an-error-that-says-something-like-array-must-not-contain-infs-or-nans-so-it-s-complaining-about-our-nan-values-as-discussed-earlier" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="we-can-use-the-isna-named-for-is-nan-function-to-test-what-values-in-a-column-are-nan">
<h4>We can use the “isna()” (named for “is NaN?”) function to test what values in a column are NaN.<a class="headerlink" href="#we-can-use-the-isna-named-for-is-nan-function-to-test-what-values-in-a-column-are-nan" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0        True
1        True
2        True
3        True
4        True
        ...  
4399    False
4400    False
4401    False
4402    False
4403    False
Name: Maximum temperature (Degree C), Length: 4404, dtype: bool
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="that-printed-out-the-row-number-and-either-true-is-a-nan-or-false-is-a-regular-number-we-can-use-the-isna-function-combined-with-the-detrend-function-to-apply-a-detrending-only-to-the-actual-numbers-avoiding-the-nans-to-do-this-we-will-use-a-logical-not-depicted-as-in-python-that-is-we-want-to-apply-detrend-to-all-of-the-values-that-are-not-nan">
<h4>That printed out the row number and either True (is a NaN) or False (is a regular number). We can use the isna() function combined with the detrend function to apply a detrending only to the actual numbers, avoiding the NaNs. To do this we will use a logical “not”, depicted as “~” in python. That is, we want to apply detrend to all of the values that are not NaN.<a class="headerlink" href="#that-printed-out-the-row-number-and-either-true-is-a-nan-or-false-is-a-regular-number-we-can-use-the-isna-function-combined-with-the-detrend-function-to-apply-a-detrending-only-to-the-actual-numbers-avoiding-the-nans-to-do-this-we-will-use-a-logical-not-depicted-as-in-python-that-is-we-want-to-apply-detrend-to-all-of-the-values-that-are-not-nan" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="in-order-to-not-overwrite-the-data-let-s-copy-using-numpy-s-copy-function-the-temperature-column-into-a-new-column-of-the-dataframe-and-then-detrend-this-new-column-let-s-call-the-column-t-detrend">
<h4>In order to not overwrite the data, let’s copy (using numpy’s <code class="docutils literal notranslate"><span class="pre">copy()</span></code> function) the temperature column into a new column of the dataframe, and then detrend this new column. Let’s call the column ‘T_detrend’.<a class="headerlink" href="#in-order-to-not-overwrite-the-data-let-s-copy-using-numpy-s-copy-function-the-temperature-column-into-a-new-column-of-the-dataframe-and-then-detrend-this-new-column-let-s-call-the-column-t-detrend" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;T_detrend&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Product code</th>
      <th>Bureau of Meteorology station number</th>
      <th>Year</th>
      <th>Month</th>
      <th>Day</th>
      <th>Maximum temperature (Degree C)</th>
      <th>Days of accumulation of maximum temperature</th>
      <th>Quality</th>
      <th>DateTime</th>
      <th>T_detrend</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>1</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-01</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>2</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-02</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>3</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-03</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>4</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-04</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>IDCJAC0010</td>
      <td>70351</td>
      <td>2008</td>
      <td>1</td>
      <td>5</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>2008-01-05</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="now-we-apply-the-detrend-function-only-to-the-values-that-are-not-nans-pd-isna">
<h4>Now we apply the detrend function only to the values that are not (~) NaNs (pd.isna()).<a class="headerlink" href="#now-we-apply-the-detrend-function-only-to-the-values-that-are-not-nans-pd-isna" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;T_detrend&#39;</span><span class="p">][</span><span class="o">~</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;T_detrend&#39;</span><span class="p">]))]</span> <span class="o">=</span> <span class="n">signal</span><span class="o">.</span><span class="n">detrend</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;T_detrend&#39;</span><span class="p">][</span><span class="o">~</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">isna</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;T_detrend&#39;</span><span class="p">]))])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>//anaconda3/lib/python3.7/site-packages/ipykernel_launcher.py:1: SettingWithCopyWarning: 
A value is trying to be set on a copy of a slice from a DataFrame

See the caveats in the documentation: https://pandas.pydata.org/pandas-docs/stable/user_guide/indexing.html#returning-a-view-versus-a-copy
  &quot;&quot;&quot;Entry point for launching an IPython kernel.
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="you-may-have-gotten-a-warning-after-running-the-cell-above-but-you-can-just-ignore-that-for-now">
<h4>(You may have gotten a warning after running the cell above, but you can just ignore that for now!)<a class="headerlink" href="#you-may-have-gotten-a-warning-after-running-the-cell-above-but-you-can-just-ignore-that-for-now" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="ok-let-s-plot-both-the-original-temperature-timeseries-and-the-detrended-timeseries-as-subplots-in-the-same-figure">
<h4>Ok, let’s plot both the original temperature timeseries and the detrended timeseries as subplots in the same figure.<a class="headerlink" href="#ok-let-s-plot-both-the-original-temperature-timeseries-and-the-detrended-timeseries-as-subplots-in-the-same-figure" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>

<span class="c1"># Make subplots with 2 rows and 1 column, with the third number indicating the 1st plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">211</span><span class="p">)</span> 
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Original timeseries&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>

<span class="c1"># Align the axes with the first and last values in the timeseries, eliminiating extra white space</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="c1"># Make subplots with 2 rows and 1 column, with the third number indicating the 2nd plot</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">212</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;T_detrend&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Detrended timeseries&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>

<span class="c1"># Align the axes with the first and last values in the timeseries, eliminiating extra white space</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Python_lab_48_0.png" src="_images/Python_lab_48_0.png" />
</div>
</div>
</div>
<div class="section" id="creating-subplots-is-really-handy-especially-if-you-have-lots-of-figures-you-d-like-to-show-together-when-publishing-papers-in-research-journals-they-usually-want-you-to-have-one-file-per-figure-so-that-s-a-great-time-to-use-subplots">
<h4>Creating subplots is really handy, especially if you have lots of figures you’d like to show together. When publishing papers in research journals, they usually want you to have one file per figure, so that’s a great time to use subplots!<a class="headerlink" href="#creating-subplots-is-really-handy-especially-if-you-have-lots-of-figures-you-d-like-to-show-together-when-publishing-papers-in-research-journals-they-usually-want-you-to-have-one-file-per-figure-so-that-s-a-great-time-to-use-subplots" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="the-two-plots-look-almost-identical-but-notice-the-different-y-axis-scales">
<h4>The two plots look almost identical, but notice the different y-axis scales!<a class="headerlink" href="#the-two-plots-look-almost-identical-but-notice-the-different-y-axis-scales" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="challenge-2-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
<h3>!Challenge #2! It’s your turn to do some coding and test your knowledge! ——————————–<a class="headerlink" href="#challenge-2-it-s-your-turn-to-do-some-coding-and-test-your-knowledge" title="Permalink to this headline">¶</a></h3>
<p>Plot the two temperature datasets (original and detrended) on the same axes. That is, plot them together on the same figure, but as one plot, not using subplot this time! Remember to add a new cell (click the “+” button!) first!</p>
<p>Tip: just use the <code class="docutils literal notranslate"><span class="pre">plt.plot()</span></code> function twice within the same figure!</p>
<div class="section" id="while-sometimes-you-may-want-to-remove-a-trend-from-a-timeseries-other-times-you-may-be-interested-in-the-trend-let-s-look-at-just-the-trend-itself-to-see-how-temperature-has-evolved-in-canberra-over-the-past-12-years-we-do-this-by-subtracting-the-detrended-data-from-the-original">
<h4>While sometimes you may want to remove a trend from a timeseries, other times you may be interested in the trend! Let’s look at just the trend itself to see how temperature has evolved in Canberra over the past 12 years. We do this by subtracting the detrended data from the original.<a class="headerlink" href="#while-sometimes-you-may-want-to-remove-a-trend-from-a-timeseries-other-times-you-may-be-interested-in-the-trend-let-s-look-at-just-the-trend-itself-to-see-how-temperature-has-evolved-in-canberra-over-the-past-12-years-we-do-this-by-subtracting-the-detrended-data-from-the-original" title="Permalink to this headline">¶</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>


<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">]</span><span class="o">-</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;T_detrend&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Temperature trend&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">margins</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Python_lab_52_0.png" src="_images/Python_lab_52_0.png" />
</div>
</div>
</div>
<div class="section" id="the-line-increases-in-time-this-implies-that-the-average-temperature-in-canberra-has-been-increasing-over-the-last-12-years-not-too-surprising-given-the-predicted-climate-change-impacts-on-australia">
<h4>The line increases in time - this implies that the average temperature in Canberra has been increasing over the last 12 years! Not too surprising given the predicted climate change impacts on Australia…<a class="headerlink" href="#the-line-increases-in-time-this-implies-that-the-average-temperature-in-canberra-has-been-increasing-over-the-last-12-years-not-too-surprising-given-the-predicted-climate-change-impacts-on-australia" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="challenge-3-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
<h3>!Challenge #3! It’s your turn to do some coding and test your knowledge! ——————————–<a class="headerlink" href="#challenge-3-it-s-your-turn-to-do-some-coding-and-test-your-knowledge" title="Permalink to this headline">¶</a></h3>
<p>Plot the original temperature dataset and the trend line on the same axes. This should be very similar to the last challenge! But this time, I want you add a legend by typing <code class="docutils literal notranslate"><span class="pre">plt.legend()</span></code> on the last line of your cell. You will also need to type the following at the end of the plot() function (but still within the parentheses!): <code class="docutils literal notranslate"><span class="pre">,label='data'</span></code> for the temperature data and <code class="docutils literal notranslate"><span class="pre">,label='trend'</span></code> for the trend line.</p>
<p>Remember to add a new cell (click the “+” button!) first!</p>
</div>
<div class="section" id="challenge-4-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
<h3>!Challenge #4! It’s your turn to do some coding and test your knowledge! ——————————–<a class="headerlink" href="#challenge-4-it-s-your-turn-to-do-some-coding-and-test-your-knowledge" title="Permalink to this headline">¶</a></h3>
<p>Now recreate the plot you just made but convert from degrees Celsius to Kelvin. The conversion is T(K) = T(C) + 273.15. Below this cell, add a new markdown cell and write out this equation using latex. Then add a new cell below to create the plot that is in Kelvin. Make sure you change the necessary labels on the plot!</p>
</div>
</div>
<div class="section" id="fancy-plotting-example-plotting-two-different-datasets-with-different-units-on-the-same-plot">
<h2>Fancy plotting example: plotting two different datasets (with different units) on the same plot<a class="headerlink" href="#fancy-plotting-example-plotting-two-different-datasets-with-different-units-on-the-same-plot" title="Permalink to this headline">¶</a></h2>
<div class="section" id="in-order-to-plot-two-datasets-we-need-to-load-a-second-dataset-let-s-load-a-dataset-of-air-quality-measurements-in-canberra-we-call-the-data-aqi-short-for-air-quality-index">
<h3>In order to plot two datasets, we need to load a second dataset. Let’s load a dataset of air quality measurements in Canberra. We call the data ‘aqi’, short for air quality index.<a class="headerlink" href="#in-order-to-plot-two-datasets-we-need-to-load-a-second-dataset-let-s-load-a-dataset-of-air-quality-measurements-in-canberra-we-call-the-data-aqi-short-for-air-quality-index" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Use pandas library to load csv file</span>
<span class="n">aqi</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Civic_Air_Quality_Station.csv&#39;</span><span class="p">)</span>
<span class="n">aqi</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>GPS</th>
      <th>DateTime</th>
      <th>NO2</th>
      <th>O3_1hr</th>
      <th>O3_4hr</th>
      <th>CO</th>
      <th>PM10</th>
      <th>PM2.5</th>
      <th>AQI_CO</th>
      <th>AQI_NO2</th>
      <th>AQI_O3_1hr</th>
      <th>AQI_O3_4hr</th>
      <th>AQI_PM10</th>
      <th>AQI_PM2.5</th>
      <th>AQI_Site</th>
      <th>Date</th>
      <th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>21/01/2020 04:00:00 PM</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>14.61</td>
      <td>4.36</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>29.0</td>
      <td>17.0</td>
      <td>29.0</td>
      <td>21 January 2020</td>
      <td>16:00:00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>21/01/2020 03:00:00 PM</td>
      <td>NaN</td>
      <td>0.033</td>
      <td>0.033</td>
      <td>0.0</td>
      <td>14.33</td>
      <td>4.23</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>33.0</td>
      <td>41.0</td>
      <td>28.0</td>
      <td>16.0</td>
      <td>41.0</td>
      <td>21 January 2020</td>
      <td>15:00:00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>21/01/2020 02:00:00 PM</td>
      <td>NaN</td>
      <td>0.034</td>
      <td>0.032</td>
      <td>0.0</td>
      <td>14.00</td>
      <td>4.18</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>34.0</td>
      <td>40.0</td>
      <td>28.0</td>
      <td>16.0</td>
      <td>40.0</td>
      <td>21 January 2020</td>
      <td>14:00:00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>21/01/2020 01:00:00 PM</td>
      <td>NaN</td>
      <td>0.032</td>
      <td>0.031</td>
      <td>0.0</td>
      <td>13.91</td>
      <td>4.36</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>32.0</td>
      <td>39.0</td>
      <td>27.0</td>
      <td>17.0</td>
      <td>39.0</td>
      <td>21 January 2020</td>
      <td>13:00:00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>21/01/2020 12:00:00 PM</td>
      <td>NaN</td>
      <td>0.032</td>
      <td>0.029</td>
      <td>0.0</td>
      <td>16.65</td>
      <td>4.60</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>32.0</td>
      <td>37.0</td>
      <td>33.0</td>
      <td>18.0</td>
      <td>37.0</td>
      <td>21 January 2020</td>
      <td>12:00:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="there-are-many-columns-of-data-here-and-you-may-need-to-scroll-to-the-right-to-see-all-of-the-columns-depending-on-your-screen-size-the-number-we-will-plot-here-is-called-pm2-5-this-refers-to-the-concentration-of-particulate-matter-pm-in-the-air-that-has-a-diameter-of-less-than-2-5-microns">
<h3>There are many columns of data here, and you may need to scroll to the right to see all of the columns (depending on your screen size). The number we will plot here is called <em>PM2.5</em>. This refers to the concentration of particulate matter (PM) in the air that has a diameter of less than 2.5 microns.<a class="headerlink" href="#there-are-many-columns-of-data-here-and-you-may-need-to-scroll-to-the-right-to-see-all-of-the-columns-depending-on-your-screen-size-the-number-we-will-plot-here-is-called-pm2-5-this-refers-to-the-concentration-of-particulate-matter-pm-in-the-air-that-has-a-diameter-of-less-than-2-5-microns" title="Permalink to this headline">¶</a></h3>
<p>The reason why I decided to use this data in the lab was to show you just how bad the air quality was in Australia during the horrendous bushfire season in the last year. For those of us living for days on end in thick smoke, it was the PM2.5 particles that we were most concerned about breathing in due to their negative health effects. But PM2.5 particles can also come from human-caused pollution sources, not just from forrest fires.</p>
</div>
<div class="section" id="anyway-back-to-this-exercise-it-looks-like-there-is-already-a-single-column-with-datetime-information-but-let-s-double-check-that-it-is-being-correctly-identified-as-datetime-by-pandas">
<h3>Anyway, back to this exercise. It looks like there is already a single column with datetime information, but let’s double check that it is being correctly identified as datetime by pandas.<a class="headerlink" href="#anyway-back-to-this-exercise-it-looks-like-there-is-already-a-single-column-with-datetime-information-but-let-s-double-check-that-it-is-being-correctly-identified-as-datetime-by-pandas" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aqi</span><span class="o">.</span><span class="n">dtypes</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Name           object
GPS            object
DateTime       object
NO2           float64
O3_1hr        float64
O3_4hr        float64
CO            float64
PM10          float64
PM2.5         float64
AQI_CO        float64
AQI_NO2       float64
AQI_O3_1hr    float64
AQI_O3_4hr    float64
AQI_PM10      float64
AQI_PM2.5     float64
AQI_Site      float64
Date           object
Time           object
dtype: object
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="nope-the-datetime-column-appears-to-be-an-object-let-s-fix-this-by-telling-pandas-to-interpret-as-a-datetime-format">
<h3>Nope, the ‘DateTime’ column appears to be an object. Let’s fix this by telling pandas to interpret as a datetime format.<a class="headerlink" href="#nope-the-datetime-column-appears-to-be-an-object-let-s-fix-this-by-telling-pandas-to-interpret-as-a-datetime-format" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">yearfirst</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span><span class="n">dayfirst</span><span class="o">=</span><span class="s1">&#39;True&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="now-let-s-take-another-look-at-the-dataset-this-time-let-s-look-at-the-last-5-rows-using-the-tail-function">
<h3>Now let’s take another look at the dataset. This time let’s look at the last 5 rows using the “tail” function.<a class="headerlink" href="#now-let-s-take-another-look-at-the-dataset-this-time-let-s-look-at-the-last-5-rows-using-the-tail-function" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aqi</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Name</th>
      <th>GPS</th>
      <th>DateTime</th>
      <th>NO2</th>
      <th>O3_1hr</th>
      <th>O3_4hr</th>
      <th>CO</th>
      <th>PM10</th>
      <th>PM2.5</th>
      <th>AQI_CO</th>
      <th>AQI_NO2</th>
      <th>AQI_O3_1hr</th>
      <th>AQI_O3_4hr</th>
      <th>AQI_PM10</th>
      <th>AQI_PM2.5</th>
      <th>AQI_Site</th>
      <th>Date</th>
      <th>Time</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>2020-01-21 16:00:00</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>14.61</td>
      <td>4.36</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>29.0</td>
      <td>17.0</td>
      <td>29.0</td>
      <td>21 January 2020</td>
      <td>16:00:00</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>2020-01-21 15:00:00</td>
      <td>NaN</td>
      <td>0.033</td>
      <td>0.033</td>
      <td>0.0</td>
      <td>14.33</td>
      <td>4.23</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>33.0</td>
      <td>41.0</td>
      <td>28.0</td>
      <td>16.0</td>
      <td>41.0</td>
      <td>21 January 2020</td>
      <td>15:00:00</td>
    </tr>
    <tr>
      <th>2</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>2020-01-21 14:00:00</td>
      <td>NaN</td>
      <td>0.034</td>
      <td>0.032</td>
      <td>0.0</td>
      <td>14.00</td>
      <td>4.18</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>34.0</td>
      <td>40.0</td>
      <td>28.0</td>
      <td>16.0</td>
      <td>40.0</td>
      <td>21 January 2020</td>
      <td>14:00:00</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>2020-01-21 13:00:00</td>
      <td>NaN</td>
      <td>0.032</td>
      <td>0.031</td>
      <td>0.0</td>
      <td>13.91</td>
      <td>4.36</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>32.0</td>
      <td>39.0</td>
      <td>27.0</td>
      <td>17.0</td>
      <td>39.0</td>
      <td>21 January 2020</td>
      <td>13:00:00</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Civic</td>
      <td>(-35.285307, 149.131579)</td>
      <td>2020-01-21 12:00:00</td>
      <td>NaN</td>
      <td>0.032</td>
      <td>0.029</td>
      <td>0.0</td>
      <td>16.65</td>
      <td>4.60</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>32.0</td>
      <td>37.0</td>
      <td>33.0</td>
      <td>18.0</td>
      <td>37.0</td>
      <td>21 January 2020</td>
      <td>12:00:00</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
</div>
<div class="section" id="the-dates-here-should-look-strange-they-aren-t-in-order-we-can-force-them-into-ascending-time-order-by-running-a-sort-function">
<h3>The dates here should look strange - they aren’t in order! We can force them into ascending time order by running a sort function:<a class="headerlink" href="#the-dates-here-should-look-strange-they-aren-t-in-order-we-can-force-them-into-ascending-time-order-by-running-a-sort-function" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">aqi</span> <span class="o">=</span> <span class="n">aqi</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">ascending</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="if-you-rerun-the-aqi-tail-cell-now-you-should-see-that-the-dates-appear-to-be-in-order-with-the-most-recent-data-at-the-end">
<h3>If you rerun the ‘aqi.tail()’ cell now, you should see that the dates appear to be in order, with the most recent data at the end.<a class="headerlink" href="#if-you-rerun-the-aqi-tail-cell-now-you-should-see-that-the-dates-appear-to-be-in-order-with-the-most-recent-data-at-the-end" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="so-we-have-our-data-loaded-with-the-two-columns-we-are-interested-in-let-s-plot-the-pm2-5-numbers-on-the-same-plot-as-the-temperature-data-this-is-a-bit-trickier-than-just-adding-two-lines-to-the-same-plot-since-we-need-to-account-for-different-units-celsius-vs-a-concentration-of-particles">
<h3>So, we have our data loaded with the two columns we are interested in. Let’s plot the PM2.5 numbers on the same plot as the temperature data! This is a bit trickier than just adding two lines to the same plot, since we need to account for different units (Celsius vs a concentration of particles).<a class="headerlink" href="#so-we-have-our-data-loaded-with-the-two-columns-we-are-interested-in-let-s-plot-the-pm2-5-numbers-on-the-same-plot-as-the-temperature-data-this-is-a-bit-trickier-than-just-adding-two-lines-to-the-same-plot-since-we-need-to-account-for-different-units-celsius-vs-a-concentration-of-particles" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Max. daily temperature&#39;</span><span class="p">,</span>
       <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature ($</span><span class="si">{}</span><span class="s1">^\circ C$)&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="c1">#plt.xlim(aqi[&#39;DateTime&#39;][17809],aqi[&#39;DateTime&#39;][0])</span>

<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;PM2.5&#39;</span><span class="p">],</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Concentration of PM2.5 particles&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;PM2.5 concentration ($\mu g/m^3$)&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">700</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">aqi</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;PM2.5&#39;</span><span class="p">],</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_coords</span><span class="p">(</span><span class="mf">1.075</span><span class="p">,</span><span class="mf">0.45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">][</span><span class="mi">17809</span><span class="p">],</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(735599.0, 737445.6666666666)
</pre></div>
</div>
<img alt="_images/Python_lab_68_1.png" src="_images/Python_lab_68_1.png" />
</div>
</div>
</div>
<div class="section" id="we-have-both-timeseries-on-the-same-plot-hooray-now-you-can-see-that-the-pm2-5-concentrations-were-very-small-for-years-before-2020-clearly-the-air-quality-does-not-show-a-yearly-cycle-like-the-temperature-does-also-very-clear-is-that-the-air-quality-was-nearly-two-orders-of-magnitude-worse-than-usual-at-the-start-of-2020-for-reference-the-australian-health-authorities-consider-a-pm2-5-concentration-greater-than-200-to-be-hazardous-to-health">
<h3>We have both timeseries on the same plot - hooray! Now you can see that the PM2.5 concentrations were very small for years before 2020. Clearly, the air quality does not show a yearly cycle like the temperature does! Also very clear is that the air quality was nearly two orders of magnitude worse than usual at the start of 2020. For reference, the Australian health authorities consider a PM2.5 concentration greater than 200 to be hazardous to health.<a class="headerlink" href="#we-have-both-timeseries-on-the-same-plot-hooray-now-you-can-see-that-the-pm2-5-concentrations-were-very-small-for-years-before-2020-clearly-the-air-quality-does-not-show-a-yearly-cycle-like-the-temperature-does-also-very-clear-is-that-the-air-quality-was-nearly-two-orders-of-magnitude-worse-than-usual-at-the-start-of-2020-for-reference-the-australian-health-authorities-consider-a-pm2-5-concentration-greater-than-200-to-be-hazardous-to-health" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="let-s-try-to-make-the-plot-look-a-bit-nicer-by-specifying-different-colors-for-the-different-data-since-we-will-use-the-color-argument-a-couple-of-times-let-s-define-the-colors-as-their-own-variables-let-s-also-add-a-horizontal-line-at-the-200-concentration-level-to-visually-highlight-the-hazardous-concentration-number">
<h3>Let’s try to make the plot look a bit nicer by specifying different colors for the different data. Since we will use the color argument a couple of times, let’s define the colors as their own variables. Let’s also add a horizontal line at the 200 concentration level to visually highlight the hazardous concentration number.<a class="headerlink" href="#let-s-try-to-make-the-plot-look-a-bit-nicer-by-specifying-different-colors-for-the-different-data-since-we-will-use-the-color-argument-a-couple-of-times-let-s-define-the-colors-as-their-own-variables-let-s-also-add-a-horizontal-line-at-the-200-concentration-level-to-visually-highlight-the-hazardous-concentration-number" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define color names</span>
<span class="n">Tcolor</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
<span class="n">AQIcolor</span> <span class="o">=</span> <span class="s1">&#39;k&#39;</span>

<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="n">Tcolor</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Max. daily temperature&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature ($</span><span class="si">{}</span><span class="s1">^\circ C$)&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">Tcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">Tcolor</span><span class="p">,</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>


<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;PM2.5&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="n">AQIcolor</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Concentration of PM2.5 particles&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;PM2.5 concentration ($\mu g/m^3$)&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">AQIcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">AQIcolor</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">700</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_coords</span><span class="p">(</span><span class="mf">1.075</span><span class="p">,</span><span class="mf">0.45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">][</span><span class="mi">17809</span><span class="p">],</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Temperature and PM2.5 in Canberra, Australia&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="s1">&#39;Canberra_temperature_fig.png&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/Python_lab_70_0.png" src="_images/Python_lab_70_0.png" />
</div>
</div>
</div>
<div class="section" id="you-can-see-that-the-left-y-axis-labels-are-now-in-red-the-same-color-as-the-temperature-data-and-what-s-nice-about-having-defined-our-plotting-colors-at-the-top-of-the-cell-is-that-you-can-easily-change-the-colors-of-either-of-the-datasets-play-around-with-different-colors-until-you-find-a-combination-you-like-color-names-listed-here-https-matplotlib-org-3-1-0-gallery-color-named-colors-html-or-you-can-define-your-own-color-using-rgb-html-color-codes-click-on-specifying-colors-at-the-above-website">
<h3>You can see that the left y-axis labels are now in red, the same color as the temperature data! And what’s nice about having defined our plotting colors at the top of the cell is that you can easily change the colors of either of the datasets! Play around with different colors until you find a combination you like! (Color names listed here: <a class="reference external" href="https://matplotlib.org/3.1.0/gallery/color/named_colors.html">https://matplotlib.org/3.1.0/gallery/color/named_colors.html</a>, or you can define your own color using RGB html color codes - click on “Specifying Colors” at the above website!)<a class="headerlink" href="#you-can-see-that-the-left-y-axis-labels-are-now-in-red-the-same-color-as-the-temperature-data-and-what-s-nice-about-having-defined-our-plotting-colors-at-the-top-of-the-cell-is-that-you-can-easily-change-the-colors-of-either-of-the-datasets-play-around-with-different-colors-until-you-find-a-combination-you-like-color-names-listed-here-https-matplotlib-org-3-1-0-gallery-color-named-colors-html-or-you-can-define-your-own-color-using-rgb-html-color-codes-click-on-specifying-colors-at-the-above-website" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="just-for-fun-here-are-another-couple-of-other-nice-functions-for-visualizing-data-you-can-use-the-alpha-argument-to-change-the-transparency-of-plotted-data-you-can-also-fill-in-the-area-beneath-a-curve-with-a-solid-color-i-ve-also-zoomed-in-below-to-emphasize-the-grey-shading-beneath-the-pm2-5-data-curve">
<h3>Just for fun, here are another couple of other nice functions for visualizing data. You can use the “alpha” argument to change the transparency of plotted data. You can also fill in the area beneath a curve with a solid color. I’ve also zoomed in below to emphasize the grey shading beneath the PM2.5 data curve.<a class="headerlink" href="#just-for-fun-here-are-another-couple-of-other-nice-functions-for-visualizing-data-you-can-use-the-alpha-argument-to-change-the-transparency-of-plotted-data-you-can-also-fill-in-the-area-beneath-a-curve-with-a-solid-color-i-ve-also-zoomed-in-below-to-emphasize-the-grey-shading-beneath-the-pm2-5-data-curve" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define color names</span>
<span class="n">Tcolor</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span>
<span class="n">AQIcolor</span> <span class="o">=</span> <span class="s1">&#39;k&#39;</span>

<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">T</span><span class="p">[</span><span class="s1">&#39;Maximum temperature (Degree C)&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="n">Tcolor</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Max. daily temperature&#39;</span><span class="p">,</span>
       <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span> <span class="c1"># make the temperature data semi-transparent</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Temperature ($</span><span class="si">{}</span><span class="s1">^\circ C$)&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">Tcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">Tcolor</span><span class="p">,</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>


<span class="n">ax2</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twinx</span><span class="p">()</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;PM2.5&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="n">AQIcolor</span><span class="p">,</span><span class="n">label</span><span class="o">=</span><span class="s1">&#39;Concentration of PM2.5 particles&#39;</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;PM2.5 concentration ($\mu g/m^3$)&#39;</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="n">AQIcolor</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="n">AQIcolor</span><span class="p">,</span><span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span><span class="n">labelsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">700</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">axhline</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="n">color</span><span class="o">=</span><span class="s1">&#39;grey&#39;</span><span class="p">,</span><span class="n">linestyle</span><span class="o">=</span><span class="s1">&#39;dashed&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;PM2.5&#39;</span><span class="p">],</span><span class="n">color</span><span class="o">=</span><span class="n">AQIcolor</span><span class="p">,</span><span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span> <span class="c1"># fill the area under the curve with a lighter shade of AQIcolor (grey in this case)</span>
<span class="n">ax2</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_label_coords</span><span class="p">(</span><span class="mf">1.075</span><span class="p">,</span><span class="mf">0.45</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">][</span><span class="mi">17809</span><span class="p">],</span><span class="n">aqi</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span> 

<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Temperature and PM2.5 in Canberra, Australia&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="challenge-5-it-s-your-turn-to-do-some-coding-and-test-your-knowledge">
<h3>!Challenge #5! It’s your turn to do some coding and test your knowledge! ——————————–<a class="headerlink" href="#challenge-5-it-s-your-turn-to-do-some-coding-and-test-your-knowledge" title="Permalink to this headline">¶</a></h3>
<p>Copy and paste the previous cell and make some changes to the plot! Change the colors, the line thicknesses (use the <code class="docutils literal notranslate"><span class="pre">linewidth=</span></code> argument within the plot function), the fontsizes, the x-axis limits, etc. Play around! If you like your final plot, share it on Slack in <code class="docutils literal notranslate"><span class="pre">#python-help</span></code>! I’d love to see your visualizations! :)</p>
<p>Remember to add a new cell or copy and past the above cell to get started!</p>
</div>
</div>
<div class="section" id="optional-section-making-a-bar-chart">
<h2>Optional section: making a bar chart!<a class="headerlink" href="#optional-section-making-a-bar-chart" title="Permalink to this headline">¶</a></h2>
<div class="section" id="in-this-exercise-we-will-load-in-a-new-dataset-of-rainfall-in-canberra-then-we-will-organize-the-rainfall-by-monthly-average-and-make-a-bar-chart-to-display-the-data">
<h3>In this exercise, we will load in a new dataset of rainfall in Canberra. Then we will organize the rainfall by monthly average and make a bar chart to display the data!<a class="headerlink" href="#in-this-exercise-we-will-load-in-a-new-dataset-of-rainfall-in-canberra-then-we-will-organize-the-rainfall-by-monthly-average-and-make-a-bar-chart-to-display-the-data" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="load-the-rainfall-data">
<h3>Load the rainfall data<a class="headerlink" href="#load-the-rainfall-data" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rain</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;IDCJAC0009_070307_1800_Data.csv&#39;</span><span class="p">)</span>
<span class="n">rain</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="again-we-need-to-convert-some-columns-to-datetime-format">
<h3>Again, we need to convert some columns to ‘DateTime’ format.<a class="headerlink" href="#again-we-need-to-convert-some-columns-to-datetime-format" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rain</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_datetime</span><span class="p">(</span><span class="n">rain</span><span class="p">[[</span><span class="s1">&#39;Year&#39;</span><span class="p">,</span><span class="s1">&#39;Month&#39;</span><span class="p">,</span><span class="s1">&#39;Day&#39;</span><span class="p">]])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="now-let-s-just-plot-the-dataset-as-is-to-see-what-it-looks-like">
<h3>Now let’s just plot the dataset as is to see what it looks like<a class="headerlink" href="#now-let-s-just-plot-the-dataset-as-is-to-see-what-it-looks-like" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Plot daily rainfall</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rain</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">rain</span><span class="p">[</span><span class="s1">&#39;Rainfall amount (millimetres)&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="it-s-a-bit-hard-to-interpret-what-s-going-on-here-with-daily-rainfall-amounts-over-40-years">
<h3>It’s a bit hard to interpret what’s going on here, with daily rainfall amounts over 40 years!<a class="headerlink" href="#it-s-a-bit-hard-to-interpret-what-s-going-on-here-with-daily-rainfall-amounts-over-40-years" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="we-can-bin-the-rainfall-into-different-time-intervals-for-instance-if-we-want-to-bin-the-rainfall-into-10-day-intervals-we-can-resample-using-the-string-10d-to-mean-10-days-then-we-use-the-function-sum-to-sum-over-each-day-in-the-10-day-interval-in-the-plot-you-can-see-that-the-data-is-starting-to-look-less-messy-now">
<h3>We can bin the rainfall into different time intervals. For instance, if we want to bin the rainfall into 10-day intervals, we can <code class="docutils literal notranslate"><span class="pre">resample()</span></code> using the string ‘10D’ to mean 10 days. Then we use the function <code class="docutils literal notranslate"><span class="pre">sum()</span></code> to sum over each day in the 10-day interval. In the plot, you can see that the data is starting to look less messy now.<a class="headerlink" href="#we-can-bin-the-rainfall-into-different-time-intervals-for-instance-if-we-want-to-bin-the-rainfall-into-10-day-intervals-we-can-resample-using-the-string-10d-to-mean-10-days-then-we-use-the-function-sum-to-sum-over-each-day-in-the-10-day-interval-in-the-plot-you-can-see-that-the-data-is-starting-to-look-less-messy-now" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate and plot 10-daily rainfall</span>
<span class="n">rain</span> <span class="o">=</span> <span class="n">rain</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="n">rain</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">])</span> <span class="c1"># first we need to set the datetime as the index of our dataframe</span>
<span class="n">rain_10day</span> <span class="o">=</span> <span class="n">rain</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;10D&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">rain_10day</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">rain_10day</span><span class="p">[</span><span class="s1">&#39;Rainfall amount (millimetres)&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">),</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="in-many-ways-it-is-more-intuitive-to-plot-daily-rainfall-accumulation-as-a-bar-chart-instead-of-as-a-timeseries-so-let-s-do-that-and-to-make-it-slightly-more-interesting-we-adjust-the-width-of-each-bar-in-the-plot-according-to-the-number-of-days-that-has-been-summed-over-although-it-is-summed-over-10-day-intervals-there-are-some-days-with-no-rain-this-time-let-s-sum-over-monthly-rainfall-accumulation">
<h3>In many ways, it is more intuitive to plot daily rainfall accumulation as a bar chart instead of as a timeseries. So let’s do that! And to make it slightly more interesting, we adjust the width of each bar in the plot according to the number of days that has been summed over. (Although it is summed over 10-day intervals, there are some days with no rain.) This time, let’s sum over monthly rainfall accumulation.<a class="headerlink" href="#in-many-ways-it-is-more-intuitive-to-plot-daily-rainfall-accumulation-as-a-bar-chart-instead-of-as-a-timeseries-so-let-s-do-that-and-to-make-it-slightly-more-interesting-we-adjust-the-width-of-each-bar-in-the-plot-according-to-the-number-of-days-that-has-been-summed-over-although-it-is-summed-over-10-day-intervals-there-are-some-days-with-no-rain-this-time-let-s-sum-over-monthly-rainfall-accumulation" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">rain</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Calculate monthly accumulation rainfall</span>
<span class="n">rain_m</span> <span class="o">=</span> <span class="n">rain</span><span class="o">.</span><span class="n">resample</span><span class="p">(</span><span class="s1">&#39;M&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>

<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="c1"># Use the &#39;bar()&#39; function and add the &#39;width&#39; argument to specify the width of the bars</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rain_m</span><span class="o">.</span><span class="n">index</span><span class="p">,</span><span class="n">rain_m</span><span class="p">[</span><span class="s1">&#39;Rainfall amount (millimetres)&#39;</span><span class="p">],</span><span class="n">width</span><span class="o">=</span><span class="n">rain_m</span><span class="p">[</span><span class="s1">&#39;Period over which rainfall was measured (days)&#39;</span><span class="p">])</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlim</span><span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2015-01-01&#39;</span><span class="p">),</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="p">(</span><span class="s1">&#39;2020-01-01&#39;</span><span class="p">))</span> <span class="c1"># set the x-axis limits</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">200</span><span class="p">)</span> <span class="c1"># set the y-axis limits</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="now-let-s-say-we-want-to-plot-the-average-rainfall-accumulation-for-each-month-across-the-40-year-timeseries-we-will-need-to-sum-over-all-days-in-each-month-and-then-average-each-month-across-all-of-the-years-to-do-that-we-can-use-a-for-loop">
<h3>Now let’s say we want to plot the average rainfall accumulation for each month across the 40-year timeseries. We will need to sum over all days in each month and then average each month across all of the years. To do that, we can use a ‘for loop’.<a class="headerlink" href="#now-let-s-say-we-want-to-plot-the-average-rainfall-accumulation-for-each-month-across-the-40-year-timeseries-we-will-need-to-sum-over-all-days-in-each-month-and-then-average-each-month-across-all-of-the-years-to-do-that-we-can-use-a-for-loop" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Make loop to define pd series of monthly average rainfall</span>

<span class="c1"># Initialize an array with length 12</span>
<span class="n">month_rain</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>

<span class="c1"># Loop through 12 times to define the monthly average rainfall accumulation</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
    <span class="n">month_rain</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">rain_m</span><span class="p">[</span><span class="n">rain_m</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s1">&#39;Rainfall amount (millimetres)&#39;</span><span class="p">]</span>
    
<span class="n">month_rain</span> <span class="c1"># print out the month_rain just to verify that it has worked!</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="now-we-will-go-ahead-and-create-a-new-pandas-dataframe-that-we-will-call-rain-bar-with-this-new-data-and-with-the-list-of-each-of-the-months-for-our-datetime-column">
<h3>Now we will go ahead and create a new pandas dataframe that we will call ‘rain_bar’ with this new data and with the list of each of the months for our ‘DateTime’ column<a class="headerlink" href="#now-we-will-go-ahead-and-create-a-new-pandas-dataframe-that-we-will-call-rain-bar-with-this-new-data-and-with-the-list-of-each-of-the-months-for-our-datetime-column" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create new pandas dataframe with average monthly rainfall totals</span>

<span class="n">rain_bar</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s1">&#39;DateTime&#39;</span><span class="p">:</span><span class="n">rain</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">dt</span><span class="o">.</span><span class="n">month_name</span><span class="p">()</span><span class="o">.</span><span class="n">unique</span><span class="p">(),</span>
                         <span class="s1">&#39;Monthly Rainfall&#39;</span><span class="p">:</span> <span class="n">month_rain</span><span class="p">})</span>
<span class="n">rain_bar</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="it-looks-good-so-far-so-let-s-go-ahead-and-plot-it">
<h3>It looks good so far, so let’s go ahead and plot it!<a class="headerlink" href="#it-looks-good-so-far-so-let-s-go-ahead-and-plot-it" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rain_bar</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">rain_bar</span><span class="p">[</span><span class="s1">&#39;Monthly Rainfall&#39;</span><span class="p">])</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="we-just-made-a-bar-plot-let-s-fancy-it-up-a-bit-this-is-the-kind-of-thing-a-lot-of-data-science-programmers-might-do-i-won-t-go-through-each-step-here-but-see-if-you-can-figure-out-what-the-code-is-doing-in-the-following-cell-ask-on-slack-or-search-online-if-you-want-to-learn-more-about-this">
<h3>We just made a bar plot! Let’s fancy it up a bit. This is the kind of thing a lot of data science programmers might do! I won’t go through each step here, but see if you can figure out what the code is doing in the following cell! (Ask on Slack or search online if you want to learn more about this!)<a class="headerlink" href="#we-just-made-a-bar-plot-let-s-fancy-it-up-a-bit-this-is-the-kind-of-thing-a-lot-of-data-science-programmers-might-do-i-won-t-go-through-each-step-here-but-see-if-you-can-figure-out-what-the-code-is-doing-in-the-following-cell-ask-on-slack-or-search-online-if-you-want-to-learn-more-about-this" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">bars</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rain_bar</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">rain_bar</span><span class="p">[</span><span class="s1">&#39;Monthly Rainfall&#39;</span><span class="p">])</span>
<span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">spine</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="c1">#plt.tick_params(top=&#39;off&#39;, bottom=&#39;off&#39;, right=&#39;off&#39;) #, labelbottom=&#39;on&#39;)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
    <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>          <span class="c1"># changes apply to the x-axis</span>
    <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span>      <span class="c1"># both major and minor ticks are affected</span>
    <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>      <span class="c1"># ticks along the bottom edge are off</span>
    <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1">#,         # ticks along the top edge are off</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
    <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;y&#39;</span><span class="p">,</span>          <span class="c1"># changes apply to the x-axis</span>
    <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span>      <span class="c1"># both major and minor ticks are affected</span>
    <span class="n">left</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>      <span class="c1"># ticks along the bottom edge are off</span>
    <span class="n">labelleft</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Label rainfall amounts on each bar</span>
<span class="k">for</span> <span class="n">bar</span> <span class="ow">in</span> <span class="n">bars</span><span class="p">:</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">bar</span><span class="o">.</span><span class="n">get_x</span><span class="p">()</span> <span class="o">+</span> <span class="n">bar</span><span class="o">.</span><span class="n">get_width</span><span class="p">()</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">bar</span><span class="o">.</span><span class="n">get_height</span><span class="p">()</span> <span class="o">-</span> <span class="mi">5</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">bar</span><span class="o">.</span><span class="n">get_height</span><span class="p">()))</span> <span class="o">+</span> <span class="s1">&#39; mm&#39;</span><span class="p">,</span> 
                 <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">11</span><span class="p">)</span> <span class="c1">#ha is horizontal alignment</span>
    
<span class="n">bars</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="o">.</span><span class="n">set_color</span><span class="p">(</span><span class="s1">&#39;salmon&#39;</span><span class="p">)</span> <span class="c1"># color the minimum rainfall month to highlight it</span>
    
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Average monthly rainfall totals in Canberra, Australia&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="doing-some-statistics-on-your-data-is-always-a-must-do-so-let-s-add-some-confidence-intervals-to-these-bars">
<h3>Doing some statistics on your data is always a must-do! So let’s add some confidence intervals to these bars.<a class="headerlink" href="#doing-some-statistics-on-your-data-is-always-a-must-do-so-let-s-add-some-confidence-intervals-to-these-bars" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># Redo loop to define pd series of monthly average rainfall, this time also defining the confidence intervals for each month</span>
<span class="n">month_rain</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span>
<span class="n">err</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">)</span> <span class="c1"># defined as: mean +/- 1.96*std/sqrt(N)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">):</span>
    <span class="n">month_rain</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">rain_m</span><span class="p">[</span><span class="n">rain_m</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()[</span><span class="s1">&#39;Rainfall amount (millimetres)&#39;</span><span class="p">]</span>
    <span class="n">err</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="mf">1.96</span><span class="o">*</span><span class="n">rain_m</span><span class="p">[</span><span class="n">rain_m</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span> <span class="o">==</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;Rainfall amount (millimetres)&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">std</span><span class="p">()</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rain_m</span><span class="p">))</span>
<span class="n">month_rain</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="plotting-time">
<h3>Plotting time!<a class="headerlink" href="#plotting-time" title="Permalink to this headline">¶</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="n">bars</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">rain_bar</span><span class="p">[</span><span class="s1">&#39;DateTime&#39;</span><span class="p">],</span><span class="n">rain_bar</span><span class="p">[</span><span class="s1">&#39;Monthly Rainfall&#39;</span><span class="p">],</span><span class="n">yerr</span><span class="o">=</span><span class="n">err</span><span class="p">,</span><span class="n">capsize</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="k">for</span> <span class="n">spine</span> <span class="ow">in</span> <span class="n">plt</span><span class="o">.</span><span class="n">gca</span><span class="p">()</span><span class="o">.</span><span class="n">spines</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
    <span class="n">spine</span><span class="o">.</span><span class="n">set_visible</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span>
     <span class="n">axis</span><span class="o">=</span><span class="s1">&#39;x&#39;</span><span class="p">,</span>          <span class="c1"># changes apply to the x-axis</span>
     <span class="n">which</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span>      <span class="c1"># both major and minor ticks are affected</span>
     <span class="n">bottom</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>      <span class="c1"># ticks along the bottom edge are off</span>
     <span class="n">top</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="c1">#,         # ticks along the top edge are off</span>
    
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Average monthly rainfall totals in Canberra, Australia&#39;</span><span class="p">,</span><span class="n">fontsize</span><span class="o">=</span><span class="mi">24</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="that-s-it-you-made-it-to-the-end-so-now-you-ve-had-several-examples-of-manipulating-data-and-plotting-test-your-skills-by-playing-around-with-any-of-the-cells-here-and-by-doing-the-other-python-labs-available">
<h3>That’s it! You made it to the end! So now you’ve had several examples of manipulating data and plotting. Test your skills by playing around with any of the cells here and by doing the other python labs available!<a class="headerlink" href="#that-s-it-you-made-it-to-the-end-so-now-you-ve-had-several-examples-of-manipulating-data-and-plotting-test-your-skills-by-playing-around-with-any-of-the-cells-here-and-by-doing-the-other-python-labs-available" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            kernelName: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

              </div>
              
        
        <div class='prev-next-bottom'>
            
    <a class='left-prev' id="prev-link" href="notebooks.html" title="previous page">Content with notebooks</a>

        </div>
        
        </div>
    </div>
    <footer class="footer mt-5 mt-md-0">
    <div class="container">
      <p>
        
          By The Jupyter Book Community<br/>
        
            &copy; Copyright 2021.<br/>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  
  </body>
</html>